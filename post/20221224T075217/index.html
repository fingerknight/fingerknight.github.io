<!DOCTYPE html>
<html>
<head>
<title>Alist 多网盘管理的尝试 - 手指骑士的病房</title>
<link rel="icon" href="/static/favicon.ico"><link href= "/static/style/style.css" rel="stylesheet" type="text/css" /></head>
<body>
<div class="header">
<div class="home-page">
<a href="/">手指骑士的病房</a></div><div class="nav">
<div class="nav item">
<a href="/tags">标签</a>
</div>
<div class="nav item">
<a href="/archive">归档</a>
</div>
<div class="nav item">
<a href="/about">关于</a>
</div>
<div class="nav item">
<a href="/emacs">Emacs</a>
</div>
</div>
</div>
<div class="main">
<div id="preamble" class="status"><link rel="stylesheet" href="/static/pygments/dracula.css"><div class="toc">
<h2 class="toc-title"> TOC </h2>
<nav id="TableOfContents">

<ul>
<li>
<a href="#org742c33a"> 简介 </a></li>
<li>
<a href="#org78aaf17"> alist 安装 </a>
<ul>
<li>
<a href="#org82fb558"> 安装 </a></li>
<li>
<a href="#orgbef1b74"> 配置 </a></li>
<li>
<a href="#org59eddb5"> 启用 </a>
<ul>
<li>
<a href="#org032cfa2"> 获取管理员信息 </a></li>
</ul>
</li>
<li>
<a href="#org9aa4b63"> 登录后台 </a></li>
<li>
<a href="#org786500f"> 添加存储 </a></li>
<li>
<a href="#org4b81627"> 部署 </a></li>
</ul>
</li>
</ul>
</nav>
</div>
<h1 class="post-title"> Alist 多网盘管理的尝试 </h1>
<div class="post-date">2023-05-17</div>
<div class="taglist"><a href="/tag/alist"> #alist </a>
<a href="/tag/archlinux"> #archlinux </a>
<a href="/tag/netdisk"> #netdisk </a>
</div>
</div>
<div id="content">

<div id="outline-container-org742c33a" class="outline-2">
<h2 id="org742c33a">简介</h2>
<div class="outline-text-2" id="text-org742c33a">
<p>
看到果核大佬发的一个多网盘的管理工具《<a href="https://www.ghxi.com/wx20221027.html" target="_blank">网盘太多不好管理？用上这个神器试试！ - 果核剥壳</a>》，目前用的网盘工具还是分开的 CLI ，便想在 Arch 上尝试一下。
</p>
</div>
</div>

<div id="outline-container-org78aaf17" class="outline-2">
<h2 id="org78aaf17">alist 安装</h2>
<div class="outline-text-2" id="text-org78aaf17">
<p>
项目地址在这里：<a href="https://github.com/alist-org/alist" target="_blank">https://github.com/alist-org/alist</a>
</p>

<p>
文档地址：<a href="https://alist.nn.ci/" target="_blank">Home | AList Docs</a>
</p>
</div>

<div id="outline-container-org82fb558" class="outline-3">
<h3 id="org82fb558">安装</h3>
<div class="outline-text-3" id="text-org82fb558">
<p>
下载安装脚本：
</p>
<div class="org-src-container">
<pre class="bash"> curl<span class="w"> </span>-fsSL<span class="w"> </span><span class="s2">&quot;https://alist.nn.ci/v3.sh&quot;</span><span class="w"> </span><span class="p">&amp;</span>gt<span class="p">;&amp;</span>gt<span class="p">;</span><span class="w"> </span>v3.sh
#<span class="w"> </span>or
wget<span class="w"> </span><span class="s2">&quot;https://alist.nn.ci/v3.sh&quot;</span>
 </pre>
</div>

<ul class="org-ul">
<li>安装： <code>bash v3.sh install</code></li>
<li>升级： <code>bash v3.sh update</code></li>
<li>卸载： <code>bash v3.sh uninstall</code></li>
</ul>

<p>
默认安装路径是 <code>/opt/alist</code> ，如果像安装/升级/卸载在其他路径把它加到后面：
</p>
<div class="org-src-container">
<pre class="bash"> bash<span class="w"> </span>v3.sh<span class="w"> </span>install/update/uninstall<span class="w"> </span><span class="p">&amp;</span>lt<span class="p">;</span>path<span class="p">&amp;</span>gt<span class="p">;</span>
 </pre>
</div>

<p>
安装成功后会生成一个服务 <code>alist.service</code>, 通过 <code>systemctl</code> 来控制。
</p>
</div>
</div>

<div id="outline-container-orgbef1b74" class="outline-3">
<h3 id="orgbef1b74">配置</h3>
<div class="outline-text-3" id="text-orgbef1b74">
<p>
我是默认的安装路径，在 <code>/opt/alist</code> ，目录结构：
</p>
<div class="org-src-container">
<pre class="nil"> .
├── alist
├── data
│   ├── config.json
│   ├── data.db
│   └── temp
└── log
    └── log.log
 </pre>
</div>
<ul class="org-ul">
<li><code>alist</code> 是执行脚本</li>
<li><code>data</code> 是数据目录， <code>config.json</code> 是配置文件，其他的是数据</li>
<li><code>log</code> 日志目录，最开始应该是没有的。</li>
</ul>

<p>
配置文件如下：
</p>
<div class="org-src-container">
<pre class="js"> <span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;force&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;address&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;port&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">5244</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;site_url&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;cdn&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;jwt_secret&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;random generated&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;token_expires_in&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">48</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;database&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;sqlite3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;host&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;port&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;user&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;password&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;db_file&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;data/data.db&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;table_prefix&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;x_&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;ssl_mode&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">&quot;scheme&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;https&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;cert_file&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;key_file&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">&quot;temp_dir&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;data/temp&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;log&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;enable&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;log/log.log&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;max_size&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;max_backups&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;max_age&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">28</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;compress&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
 </pre>
</div>

<p>
各配置项的用途参考官网：<a href="https://alist.nn.ci/zh/config/configuration.html" target="_blank">https://alist.nn.ci/zh/config/configuration.html</a>
</p>
</div>
</div>

<div id="outline-container-org59eddb5" class="outline-3">
<h3 id="org59eddb5">启用</h3>
<div class="outline-text-3" id="text-org59eddb5">
</div>
<div id="outline-container-org032cfa2" class="outline-4">
<h4 id="org032cfa2">获取管理员信息</h4>
<div class="outline-text-4" id="text-org032cfa2">
<p>
<code>sudo ./alist admin --data alist-dir</code>
</p>
<ul class="org-ul">
<li><code>alist-dir</code> 就是 Alist 的 data 的目录，如果不给这个参数，就会在当前目录下建一个 data.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org9aa4b63" class="outline-3">
<h3 id="org9aa4b63">登录后台</h3>
<div class="outline-text-3" id="text-org9aa4b63">
<p>
原谅我没在文档中找到进入后台的办法，最终是在 b 站一个 up 主的视频里面才看到的 <sup>[<a id="fnr:1.1" class="footref" href="#fn:1">1</a>]</sup>。
</p>

<p>
访问： <code>http://localhost:5244/@login</code> ，输入管理员信息即可。
</p>

<p>
这是它会跳转到 index 主页，但是因为还没添加网盘，所以会报错 <code>failed get storage: can't find storage with rawPath: /</code>  ，这个在文档里面提到了 <sup>[<a id="fnr:2.1" class="footref" href="#fn:2">2</a>]</sup> 。
</p>

<p>
访问： <code>http://localhost:5244/@manage</code> ，登录到管理界面。
</p>
</div>
</div>

<div id="outline-container-org786500f" class="outline-3">
<h3 id="org786500f">添加存储</h3>
<div class="outline-text-3" id="text-org786500f">
<p>
在列表左边 <code>存储</code> 那里添加，按照官网的文档添加就行。
</p>
</div>
</div>

<div id="outline-container-org4b81627" class="outline-3">
<h3 id="org4b81627">部署</h3>
<div class="outline-text-3" id="text-org4b81627">
<p>
部署参照官网，我是把它当作客户端来用，不想用命令行了。
</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="text-footnotes" role="doc-endnotes">
<ol>
<li id="fn:1">
<p class="footpara">
<a href="https://www.bilibili.com/video/BV1BP411G7q9/" target="_blank">【Alist】Alist V3 "全新版本" 使用 安装/启动 教程！ 保姆级/傻瓜式/手把手 教学！！_哔哩哔哩_bilibili</a>
<a href="#fnr:1.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
<li id="fn:2">
<p class="footpara">
<a href="https://alist.nn.ci/zh/faq/why.html" target="_blank">Why | AList文档</a>
<a href="#fnr:2.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
</div>
</div>
<div class="footer">
<center> The End </center></div>
</body>
</html>
