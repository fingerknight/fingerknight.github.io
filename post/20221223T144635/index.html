<!DOCTYPE html>
<html>
<head>
<title>基于 hugo org mode github page 的静态站点搭建 - 手指骑士的病房</title>
<link rel="icon" href="/static/favicon.ico"><link href= "/static/style/style.css" rel="stylesheet" type="text/css" /></head>
<body>
<div id="header">
<div class="home-page">
<a href="/">手指骑士的病房</a></div><div class="nav">
<div class="nav item">
<a href="/tags">标签</a>
</div>
<div class="nav item">
<a href="/archive">归档</a>
</div>
<div class="nav item">
<a href="/about">关于</a>
</div>
<div class="nav item">
<a href="/emacs">Emacs</a>
</div>
</div>
</div>
<div id="main">
<div id="toc">
<h2 class="toc-title"> TOC </h2>
<nav id="TableOfContents">

<ul>
<li>
<a href="#org92dd447"> 简介 </a></li>
<li>
<a href="#org059b777"> 工具 </a></li>
<li>
<a href="#orgebb9a31"> 搭建流程 </a>
<ul>
<li>
<a href="#org8e3c473"> 安装 Hugo </a></li>
<li>
<a href="#orgdbe26b4"> Github Page 配置 </a></li>
<li>
<a href="#org01c6f9f"> Hugo 使用 </a></li>
<li>
<a href="#orga592477"> 项目目录修改 </a></li>
<li>
<a href="#org42b87fc"> Hugo 主题 </a></li>
<li>
<a href="#orga57a8c1"> 我的 Hugo 配置 </a>
<ul>
<li>
<a href="#orgcedb922"> 关于资源目录 </a></li>
</ul>
</li>
<li>
<a href="#orgcd88446"> 安装 ox-hugo </a></li>
<li>
<a href="#orgd27dd88"> ox-hugo 使用 </a></li>
<li>
<a href="#orgfb6dc1e"> 设置评论 </a>
<ul>
<li>
<a href="#org8533573"> LoveIt 的 Bug </a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#orga7ddbf6"> 工作流程 </a></li>
<li>
<a href="#orgc2e53c7"> 自动化 </a></li>
<li>
<a href="#org21fc66c"> 优化 </a>
<ul>
<li>
<a href="#org24db0eb"> CDN 设置 </a></li>
<li>
<a href="#org8db9a77"> Cloudflare Page </a></li>
<li>
<a href="#org31249e6"> Cloudflare + DNS </a></li>
</ul>
</li>
<li>
<a href="#org41957e2"> 后记 </a></li>
</ul>
</nav>
</div>
<div id="page">
<div id="preamble" class="status"><link rel="stylesheet" href="/static/pygments/dracula.css"><h1 class="post-title"> 基于 hugo org mode github page 的静态站点搭建 </h1>
<div class="post-date">2023-05-17</div>
<div class="taglist"><a href="/tag/emacs"> #emacs </a>
<a href="/tag/githubpage"> #githubpage </a>
<a href="/tag/hugo"> #hugo </a>
<a href="/tag/orgmode"> #orgmode </a>
<a href="/tag/site"> #site </a>
</div>
</div>
<div id="content">

<div id="outline-container-org92dd447" class="outline-2">
<h2 id="org92dd447">简介</h2>
<div class="outline-text-2" id="text-org92dd447">
<p>
现在已经全面转战 Emacs 和 Org Mode 了，想搭个人博客，折腾了很久。这里记录搭建思路和过程，供参考。
</p>
</div>
</div>

<div id="outline-container-org059b777" class="outline-2">
<h2 id="org059b777">工具</h2>
<div class="outline-text-2" id="text-org059b777">
<ul class="org-ul">
<li>Emacs + Org Mode</li>
<li>Hugo 静态站点生成制作</li>
<li>ox-hugo 将 org 文件转换成 md 文件</li>
<li>GitHub Page 博客托管平台</li>
<li>Gitalk 博客评论，基于 GitHub 的 Issue</li>
</ul>
</div>
</div>

<div id="outline-container-orgebb9a31" class="outline-2">
<h2 id="orgebb9a31">搭建流程</h2>
<div class="outline-text-2" id="text-orgebb9a31">
<p>
假定已经安装了 <b>Emacs</b> 和 <b>Git</b> 。
</p>
</div>

<div id="outline-container-org8e3c473" class="outline-3">
<h3 id="org8e3c473">安装 Hugo</h3>
<div class="outline-text-3" id="text-org8e3c473">
<p>
官方的下载页面在这里 <a href="https://gohugo.io/getting-started/installing" target="_blank">https://gohugo.io/getting-started/installing</a> ，根据自己的系统去安装即可。
</p>

<div class="org-src-container">
<pre class="bash"> sudo<span class="w"> </span>pacman<span class="w"> </span>-S<span class="w"> </span>hugo
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgdbe26b4" class="outline-3">
<h3 id="orgdbe26b4">Github Page 配置</h3>
<div class="outline-text-3" id="text-orgdbe26b4">
<p>
首先，新建一个仓库，仓库名必须是 <code>&lt;Name&gt;.github.io</code> ， <code>&lt;Name&gt;</code> 是的 github 的昵称。
</p>


<figure id="org514fdf2">
<a href="/assets/0ee8e396ec7b2bad1850f4e7eec4064d.png" target="_blank" target="_blank"><img src="/assets/0ee8e396ec7b2bad1850f4e7eec4064d.png" alt="0ee8e396ec7b2bad1850f4e7eec4064d.png"></a>

</figure>

<p>
如果新建时选了自动建 <code>README.md</code> ，就好了。如果没有执行（里面的 <code>Name</code> 是 github 昵称）：
</p>
<div class="org-src-container">
<pre class="bash"> #<span class="w"> </span>随便一个<span class="w"> </span>REMAD.md
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;# Just a README&quot;</span><span class="w"> </span><span class="p">&amp;</span>gt<span class="p">;&amp;</span>gt<span class="p">;</span><span class="w"> </span>README.md
git<span class="w"> </span>init
git<span class="w"> </span>add<span class="w"> </span>README.md
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;first commit&quot;</span>
#<span class="w"> </span>新基础分支
git<span class="w"> </span>branch<span class="w"> </span>-M<span class="w"> </span>main
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>git@github.com:Name/Name.github.io.git
#<span class="w"> </span>提交到基础分支
git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>main
 </pre>
</div>

<p>
在 <code>Settings</code> 里边，在左边那里点开 <code>Page</code> 。
</p>


<figure id="org7811209">
<a href="/assets/a8a20d8dfdd1a69a0ac4a00e4025f44d.png" target="_blank" target="_blank"><img src="/assets/a8a20d8dfdd1a69a0ac4a00e4025f44d.png" alt="a8a20d8dfdd1a69a0ac4a00e4025f44d.png"></a>

</figure>

<p>
至此 GitHub Page 就搭建好了，等几分钟它那边部署，然后就可以去访问 <code>https://&lt;Name&gt;.github.io/</code> 了（&lt;Name&gt; 是 github 昵称），不过现在应该是 404 ，里面什么东西都还没有。
</p>
</div>
</div>

<div id="outline-container-org01c6f9f" class="outline-3">
<h3 id="org01c6f9f">Hugo 使用</h3>
<div class="outline-text-3" id="text-org01c6f9f">
<p>
新建项目， <code>blog</code> 是项目目录。
</p>
<div class="org-src-container">
<pre class="bash"> hugo<span class="w"> </span>new<span class="w"> </span>site<span class="w"> </span>blog
 </pre>
</div>

<p>
然后会生成如下的项目：
</p>
<pre class="example" id="org99d740a">
├── blog
│   ├── archetypes/
│   ├── config.toml
│   ├── content/
│   ├── data/
│   ├── layouts/
│   ├── public/
│   ├── static/
│   ├── themes/
</pre>
<p>
具体作用如下<sup>[<a id="fnr:1.1" class="footref" href="#fn:1">1</a>]</sup>：
</p>
<ul class="org-ul">
<li><code>archetypes</code>, 内容模板，可以取参考里面看，暂时不用管。</li>
<li><code>config.toml</code>, 配置文件，详见<a href="#orga57a8c1">我的 Hugo 配置</a></li>
<li><code>content</code>, 内容目录，用于存放 md 源文件。</li>
<li><code>data</code>, 数据模板目录，暂时不用管。</li>
<li><code>layouts</code>, HTML 模板目录，md 生成 HTML 的模板，有一套单独的语言描述。暂时也不用配。</li>
<li><code>public</code>, 发布目录，生成的 HTML 会存到这个目录下边。后面需要修改。</li>
<li><code>themes</code>, 主题目录，用于存放主题相关配置。</li>
</ul>

<p>
测试时，进入 <code>blog</code> 目录，使用：
</p>
<div class="org-src-container">
<pre class="bash"> hugo<span class="w"> </span>server
 </pre>
</div>
<p>
然后会开启默认端口，从输出信息中可以看到。从浏览器访问就能看到。
</p>
</div>
</div>

<div id="outline-container-orga592477" class="outline-3">
<h3 id="orga592477">项目目录修改</h3>
<div class="outline-text-3" id="text-orga592477">
<p>
克隆仓库：
</p>
<div class="org-src-container">
<pre class="bash"> #<span class="w"> </span>blog<span class="w"> </span>下
git<span class="w"> </span>clone<span class="w"> </span>git@github.com:<span class="p">&amp;</span>lt<span class="p">;</span>Name<span class="p">&amp;</span>gt<span class="p">;</span>/<span class="p">&amp;</span>lt<span class="p">;</span>Name<span class="p">&amp;</span>gt<span class="p">;</span>.github.io.git<span class="w"> </span>project
 </pre>
</div>
<p>
在 <code>blog/project</code> 目录下新目录存放 org 源码的目录（手动建）：
</p>
<pre class="example" id="orgdf369de">
├── project
│   ├── assets/
│   ├── posts/
</pre>
<p>
org 文件就放在 <code>blog/project/posts</code> 下，静态资源就放在 <code>blog/project/assets</code> 下。
</p>

<p>
因为 Github Page 只能选 <code>/</code> 根目录或者 <code>/docs</code> 目录作为站点目录，所以需要在配置中把站点输出目录修改一下。在<a href="#orga57a8c1">我的 Hugo 配置</a>那里我会说的。
</p>
</div>
</div>

<div id="outline-container-org42b87fc" class="outline-3">
<h3 id="org42b87fc">Hugo 主题</h3>
<div class="outline-text-3" id="text-org42b87fc">
<p>
主题可以去官网上找 <a href="https://themes.gohugo.io/" target="_blank">https://themes.gohugo.io/</a> ，我参考的是前辈用的 <a href="https://github.com/dillonzq/LoveIt" target="_blank">LoveIt</a> <sup>[<a id="fnr:2.1" class="footref" href="#fn:2">2</a>]</sup>，功能强大，界面美观，且不会太花哨。
</p>

<p>
先找到主题的 github 仓库 <a href="https://github.com/dillonzq/LoveIt" target="_blank">https://github.com/dillonzq/LoveIt</a>，然后把它作为 hugo 项目的子模块
</p>
<div class="org-src-container">
<pre class="bash"> #<span class="w"> </span>在<span class="w"> </span>blog<span class="w"> </span>目录下操作
git<span class="w"> </span>submodule<span class="w"> </span>add<span class="w"> </span>https://github.com/dillonzq/LoveIt.git<span class="w"> </span>themes/LoveIt
 </pre>
</div>
<p>
或者直接克隆也可以。
</p>

<p>
配置信息：<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#basic-configuration" target="_blank">基础配置</a>，<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#3-%E9%85%8D%E7%BD%AE" target="_blank">完整配置</a>。
</p>

<p>
复制之后直接贴到 <code>config.toml</code> 即可。
</p>
</div>
</div>

<div id="outline-container-orga57a8c1" class="outline-3">
<h3 id="orga57a8c1">我的 Hugo 配置</h3>
<div class="outline-text-3" id="text-orga57a8c1">
<p>
配置文件可以说三种类型： <code>toml</code>, <code>yaml</code> 和 <code>json</code> ，我用的是 <code>yaml</code> ，简洁；把 LoveIt 官网给的完整配置转成 <code>yaml</code> ，然后手动调整，参考如下。
</p>

<p>
因为配置里面可能会用到密钥什么的，因此不建议公开到 GitHub 上边，所以只上传 <b>Org 源码</b>, <b>静态文件</b>和<b>站点文件</b>。如下所示:
</p>

<pre class="example" id="orgf721397">
├── project
│   ├── assets/   # 存放静态文件
│   ├── posts/    # 存放 org 
│   ├── docs/     # 站点文件
</pre>

<p>
在 GitHub Page 的设置中把分支那里的目录设置成 <code>/docs</code> （只能是 <code>/(root)</code> 或 <code>/docs</code> ），配置文件中修改输出目录 <code>publishDir</code> 为 <code>project/docs</code> ，以适配 Github Page  ， <code>public</code> 目录就可以不要了，我把这个设置放到了第一行。
</p>

<p>
这样源码 org 文件和站点代码都可以被托管到 GitHub 上。
</p>

<p>
<code>config.yaml</code>
</p>
<div class="org-src-container">
<pre class="yaml"> <span class="nt">publishDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">project/docs</span>
<span class="c1"># 站点URL</span>
<span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://fingerknight.github.io/</span>
<span class="c1"># 默认语言</span>
<span class="nt">defaultContentLanguage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zh-cn</span>
<span class="nt">languageCode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zh-CN</span>
<span class="nt">hasCJKLanguage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="c1"># 主题</span>
<span class="nt">theme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LoveIt</span>
<span class="c1"># 网站标题</span>
<span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">手指骑士的病房</span>
<span class="c1"># 作者</span>
<span class="nt">author</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Finger Knight</span>
<span class="w">  </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mrdust1880@outlook.com</span>
<span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://fingerknight.github.io/about</span>
<span class="c1"># 默认每页列表显示的文章数目</span>
<span class="nt">paginate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12</span>
<span class="c1"># 谷歌分析代号 [UA-XXXXXXXX-X]</span>
<span class="nt">googleAnalytics</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="c1"># 版权描述，仅仅用于 SEO</span>
<span class="nt">copyright</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="c1"># 是否使用 robots.txt</span>
<span class="nt">enableRobotsTXT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="c1"># 是否使用 git 信息</span>
<span class="nt">enableGitInfo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="c1"># 是否使用 emoji 代码</span>
<span class="nt">enableEmoji</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="c1"># 忽略一些构建错误</span>
<span class="nt">ignoreErrors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error-remote-getjson&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;error-missing-instagram-accesstoken&quot;</span><span class="p p-Indicator">]</span>
<span class="c1"># 标记语言设置</span>
<span class="nt">markup</span><span class="p">:</span>
<span class="w">  </span><span class="nt">highlight</span><span class="p">:</span>
<span class="w">    </span><span class="nt">noClasses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">codeFences</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">guessSyntax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">lineNos</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">lineNumbersInTable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">goldmark</span><span class="p">:</span>
<span class="w">    </span><span class="nt">extensions</span><span class="p">:</span>
<span class="w">      </span><span class="nt">definitionList</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">footnote</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">linkify</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">strikethrough</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">taskList</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">typographer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">renderer</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># 是否在文档中直接使用 HTML 标签</span>
<span class="w">      </span><span class="nt">unsafe</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="c1"># 目录</span>
<span class="w">  </span><span class="nt">tableOfContents</span><span class="p">:</span>
<span class="w">    </span><span class="nt">startLevel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">endLevel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<span class="c1"># 网站地图配置</span>
<span class="nt">sitemap</span><span class="p">:</span>
<span class="w">  </span><span class="nt">changefreq</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">weekly</span>
<span class="w">  </span><span class="nt">filename</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sitemap.xml</span>
<span class="w">  </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="c1"># Permalinks 配置</span>
<span class="nt">Permalinks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">posts</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;:filename&#39;</span>
<span class="c1"># 输出设置</span>
<span class="nt">outputs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">home</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTML</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">JSON</span>
<span class="w">  </span><span class="nt">page</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTML</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MarkDown</span>
<span class="w">  </span><span class="nt">section</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTML</span>
<span class="w">  </span><span class="nt">taxonomy</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTML</span>
<span class="w">  </span><span class="nt">taxonomyTerm</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HTML</span>
<span class="c1"># 语言设置</span>
<span class="nt">language</span><span class="p">:</span>
<span class="w">  </span><span class="nt">zh-cn</span><span class="p">:</span>
<span class="w">    </span><span class="nt">contentDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content</span>
<span class="w">    </span><span class="nt">languageName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">中文</span>
<span class="c1"># 菜单设置</span>
<span class="nt">menus</span><span class="p">:</span>
<span class="w">  </span><span class="nt">main</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="w">      </span><span class="nt">pre</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;lt</span><span class="l l-Scalar l-Scalar-Plain">;i class=&quot;fa-solid fa-house&quot;&amp;gt;&amp;lt;/i&amp;gt;</span>
<span class="w">      </span><span class="nt">post</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">主页</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tags</span>
<span class="w">      </span><span class="nt">pre</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;lt</span><span class="l l-Scalar l-Scalar-Plain">;i class=&quot;fa-solid fa-tags&quot;&amp;gt;&amp;lt;/i&amp;gt;</span>
<span class="w">      </span><span class="nt">post</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tags/</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">标签</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">posts</span>
<span class="w">      </span><span class="nt">pre</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;lt</span><span class="l l-Scalar l-Scalar-Plain">;i class=&quot;fa-solid fa-layer-group&quot;&amp;gt;&amp;lt;/i&amp;gt;</span>
<span class="w">      </span><span class="nt">post</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/posts/</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">归档</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">about</span>
<span class="w">      </span><span class="nt">pre</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;lt</span><span class="l l-Scalar l-Scalar-Plain">;i class=&quot;fa-solid fa-bed-pulse&quot;&amp;gt;&amp;lt;/i&amp;gt;</span>
<span class="w">      </span><span class="nt">post</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/about</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">病历</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="c1"># 参数设置</span>
<span class="nt">params</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># 网站默认主题样式 [&quot;auto&quot;, &quot;light&quot;, &quot;dark&quot;]</span>
<span class="w">  </span><span class="nt">defaultTheme</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
<span class="w">  </span><span class="c1"># 哪种哈希函数用来 SRI, 为空时表示不使用 SRI</span>
<span class="w">  </span><span class="c1"># [&quot;sha256&quot;, &quot;sha384&quot;, &quot;sha512&quot;, &quot;md5&quot;]</span>
<span class="w">  </span><span class="nt">fingerprint</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sha256&quot;</span>
<span class="w">  </span><span class="c1"># 日期格式</span>
<span class="w">  </span><span class="nt">dateFormat</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2006-01-02&quot;</span>
<span class="w">  </span><span class="c1"># 网站标题, 用于 Open Graph 和 Twitter Cards</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;手指骑士的病房&quot;</span>
<span class="w">  </span><span class="c1"># 网站描述, 用于 RSS, SEO, Open Graph 和 Twitter Cards</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;痴人说梦&quot;</span>
<span class="w">  </span><span class="c1"># 网站图片, 用于 Open Graph 和 Twitter Cards</span>
<span class="w">  </span><span class="c1"># images:</span>
<span class="w">  </span><span class="c1">#   - /logo.png</span>
<span class="w">  </span><span class="c1"># 首部元素</span>
<span class="w">  </span><span class="nt">header</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 桌面端导航栏模式 [&quot;fixed&quot;, &quot;normal&quot;, &quot;auto&quot;]</span>
<span class="w">    </span><span class="nt">desktopMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fixed</span>
<span class="w">    </span><span class="c1"># 移动端导航栏模式 [&quot;fixed&quot;, &quot;normal&quot;, &quot;auto&quot;]</span>
<span class="w">    </span><span class="nt">mobileMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
<span class="w">    </span><span class="nt">title</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># logo: /avatar.png</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">手指骑士的病房</span>
<span class="w">      </span><span class="nt">pre</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">post</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">typeit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="c1"># 尾部元素</span>
<span class="w">  </span><span class="nt">footer</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">custom</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">hugo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">copyright</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1"># 是否显示作者</span>
<span class="w">    </span><span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1"># 网站创立年份</span>
<span class="w">    </span><span class="nt">since</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2022</span>
<span class="w">    </span><span class="nt">icp</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="c1"># 许可协议信息 (支持 HTML 格式)</span>
<span class="w">    </span><span class="nt">license</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;lt</span><span class="l l-Scalar l-Scalar-Plain">;a rel=&quot;license external nofollow noopener noreffer&quot; href=&quot;https://creativecommons.org/licenses/by-nc/4.0/&quot; target=&quot;_blank&quot;&amp;gt;CC BY-NC 4.0&amp;lt;/a&amp;gt;</span>
<span class="w">  </span><span class="c1"># Section (所有文章) 页面配置</span>
<span class="w">  </span><span class="nt">section</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># section 页面每页显示文章数量</span>
<span class="w">    </span><span class="nt">paginate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">    </span><span class="c1"># 日期格式 (月和日)</span>
<span class="w">    </span><span class="nt">dateFormat</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01-02</span>
<span class="w">    </span><span class="c1"># RSS 文章数目</span>
<span class="w">    </span><span class="nt">rss</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="c1"># List (目录或标签) 页面配置</span>
<span class="w">  </span><span class="nt">list</span><span class="p">:</span>
<span class="w">    </span><span class="nt">paginate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">    </span><span class="nt">dateFormat</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01-02</span>
<span class="w">    </span><span class="nt">rss</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="c1"># 主页配置</span>
<span class="w">  </span><span class="nt">home</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># RSS 文章数目</span>
<span class="w">    </span><span class="nt">rss</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">    </span><span class="c1"># 主页个人信息</span>
<span class="w">    </span><span class="nt">profile</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="c1"># gravatarEmail: &#39;&#39;</span>
<span class="w">      </span><span class="nt">avatarURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/img/YunRuAvatar.jpg</span>
<span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">subtitle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">痴人说梦</span>
<span class="w">      </span><span class="nt">typeit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="c1"># 是否显示社交账号</span>
<span class="w">      </span><span class="nt">social</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="c1"># 免责声明</span>
<span class="w">      </span><span class="nt">disclaimer</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="c1"># 主页文章列表</span>
<span class="w">    </span><span class="nt">posts</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">paginate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="nt">defaultHiddenFromHomePage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="c1"># 文章页面全局配置</span>
<span class="w">  </span><span class="nt">page</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># 是否在主页隐藏一篇文章</span>
<span class="w">    </span><span class="nt">hiddenFromHomePage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="c1"># 是否在搜索结果中隐藏一篇文章</span>
<span class="w">    </span><span class="nt">hiddenFromSearch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="c1"># 是否使用 fontawesome 扩展语法</span>
<span class="w">    </span><span class="nt">fontawesome</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1"># 是否在 RSS 中显示全文内容</span>
<span class="w">    </span><span class="nt">rssFullText</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">prev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">next</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">linktomarkdown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="c1"># 开启上下篇</span>
<span class="w">    </span><span class="nt">nav</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="c1"># 目录</span>
<span class="w">    </span><span class="nt">toc</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="c1">#  是否保持使用文章前面的静态目录</span>
<span class="w">      </span><span class="nt">keepStatic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="c1"># 是否侧边目录自动折叠展开</span>
<span class="w">      </span><span class="nt">auto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="c1"># 代码</span>
<span class="w">    </span><span class="nt">code</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># 是否显示代码块的复制按钮</span>
<span class="w">      </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="c1"># 默认展开显示的代码行数</span>
<span class="w">      </span><span class="nt">maxShownLines</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">    </span><span class="c1"># KaTeX 数学公式</span>
<span class="w">    </span><span class="nt">math</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">inlineLeftDelimiter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">inlineRightDelimiter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">blockLeftDelimiter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">blockRightDelimiter</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">copyTex</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">mhchem</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1"># 地图</span>
<span class="w">    </span><span class="nt">mapbox</span><span class="p">:</span>
<span class="w">      </span><span class="nt">accessToken</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">      </span><span class="nt">lightStyle</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;mapbox://styles/mapbox/light-v10?optimize=true&#39;</span>
<span class="w">      </span><span class="nt">darkStyle</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;mapbox://styles/mapbox/dark-v10?optimize=true&#39;</span>
<span class="w">      </span><span class="nt">navigation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">geolocate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">fullscreen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1"># 关闭分享</span>
<span class="w">    </span><span class="nt">share</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="c1"># 评论看后面</span>
<span class="w">    </span><span class="c1"># comment:</span>
<span class="w">    </span><span class="c1">#   enable: true</span>
<span class="w">    </span><span class="c1">#   gitalk:</span>
<span class="w">    </span><span class="c1"># 第三方静态资源</span>
<span class="w">    </span><span class="nt">library</span><span class="p">:</span>
<span class="w">      </span><span class="nt">css</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">js</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">    </span><span class="c1"># 页面 SEO 配置</span>
<span class="w">    </span><span class="nt">seo</span><span class="p">:</span>
<span class="w">      </span><span class="nt">images</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">publisher</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">logoUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">  </span><span class="c1"># TypeIt 配置</span>
<span class="w">  </span><span class="nt">typeit</span><span class="p">:</span>
<span class="w">    </span><span class="nt">speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">cursorSpeed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">    </span><span class="nt">cursorChar</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;|&#39;</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="w">  </span><span class="c1"># 网站 SEO 配置</span>
<span class="w">  </span><span class="nt">seo</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">thumbnailUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">  </span><span class="c1">#  第三方库文件的 CDN 设置</span>
<span class="w">  </span><span class="c1"># CDN 数据文件名称, 默认不启用</span>
<span class="w">  </span><span class="c1"># [&quot;jsdelivr.yml&quot;]</span>
<span class="w">  </span><span class="c1"># 位于 &quot;themes/LoveIt/assets/data/cdn/&quot; 目录</span>
<span class="w">  </span><span class="c1"># 可以在你的项目下相同路径存放你自己的数据文件:</span>
<span class="w">  </span><span class="c1"># &quot;assets/data/cdn/&quot;</span>
<span class="w">  </span><span class="c1"># cdn:</span>
<span class="w">  </span><span class="c1">#   data: &#39;&#39;</span>
<span class="w">  </span><span class="c1"># 搜索设置</span>
<span class="w">  </span><span class="nt">search</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1"># 搜索引擎的类型 [&quot;lunr&quot;, &quot;algolia&quot;]</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lunr</span>
<span class="w">    </span><span class="c1"># 文章内容最长索引长度</span>
<span class="w">    </span><span class="nt">contentLength</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4000</span>
<span class="w">    </span><span class="c1"># 搜索框的占位提示语</span>
<span class="w">    </span><span class="nt">placeholder</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="c1"># 最大结果数目</span>
<span class="w">    </span><span class="nt">maxResultLength</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">    </span><span class="c1"># 结果内容片段长度</span>
<span class="w">    </span><span class="nt">snippetLength</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">    </span><span class="c1"># 搜索结果中高亮部分的 HTML 标签</span>
<span class="w">    </span><span class="nt">highlightTag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">em</span>
<span class="w">    </span><span class="c1"># 是否在搜索索引中使用基于 baseURL 的绝对路径</span>
<span class="w">    </span><span class="nt">absoluteURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
 </pre>
</div>
</div>

<div id="outline-container-orgcedb922" class="outline-4">
<h4 id="orgcedb922">关于资源目录</h4>
<div class="outline-text-4" id="text-orgcedb922">
<p>
假设有个写好了的 md ,位置 <code>content/test.md</code> ，那么它会出现在<b>站点的根目录</b>，也就是需要访问 <code>https://yoursite.com/test.md</code> 。
</p>

<p>
同理，静态资源是存在 <code>static</code> 下边的，假如你有网站图标和某个 css 在它下边， <code>static/favicon.ico</code> 和 <code>static/test.css</code> ，那么访问的时候是 <code>https://yoursite.com/favicon.ico</code> 和 <code>https://yoursite.com/test.css</code> 。
</p>

<p>
所以对于文本中出现的图片，可以新建一个目录 <code>static/assets/</code> ,放在里面，后续访问就是 <code>https://yoursite.com/assets/xx</code> 。
</p>
</div>
</div>
</div>

<div id="outline-container-orgcd88446" class="outline-3">
<h3 id="orgcd88446">安装 ox-hugo</h3>
<div class="outline-text-3" id="text-orgcd88446">
<p>
官网的安装页面：<a href="https://ox-hugo.scripter.co/#installation" target="_blank">https://ox-hugo.scripter.co/#installation</a>。
</p>

<div class="org-src-container">
<pre class="lisp"> <span class="p">(</span><span class="nv">with-eval-after-load</span><span class="w"> </span><span class="ss">&#39;ox</span>
<span class="w">  </span><span class="p">(</span><span class="nb">require</span><span class="w"> </span><span class="ss">&#39;ox-hugo</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-hugo-base-dir</span><span class="w"> </span><span class="o">..</span><span class="nv">/blog/</span><span class="err">&quot;</span>
<span class="w">    </span><span class="c1">;; org-hugo-section &quot;posts&quot;</span>
<span class="w">    </span><span class="nv">org-hugo-default-static-subdirectory-for-externals</span><span class="w"> </span><span class="s">&quot;img&quot;</span>
<span class="w">    </span><span class="nv">org-hugo-auto-set-lastmod</span><span class="w"> </span><span class="nc">t</span>
<span class="w">    </span><span class="nv">org-hugo-export-with-toc</span><span class="w"> </span><span class="no">nil</span><span class="p">))</span>
 </pre>
</div>
<ul class="org-ul">
<li><code>org-hugo-base-dir</code>, 项目的根目录</li>
<li><code>org-hugo-section</code>, 文档的目录，相对于 <code>contnet</code> 而言。如果值是 <code>posts</code> ，它的路径就是 ../blog/content/posts/~ 。这里注释了是因为默认就是 <code>posts</code></li>
<li><code>org-hugo-auto-set-lastmod</code>, 自动修改“最近更新时间”</li>
<li><code>org-hugo-export-with-toc</code>, 是是否开启文档目录。这个目录放到文章开头， Hugo 配置里面有目录了，所以不用。</li>
<li><code>org-hugo-default-static-subdirectory-for-externals</code>, 静态文件的目录，相对于 <code>static</code> 而言。例如它的值是 <code>img</code>, 那么图片就会存在 ../blog/static/img~</li>
</ul>
</div>
</div>

<div id="outline-container-orgd27dd88" class="outline-3">
<h3 id="orgd27dd88">ox-hugo 使用</h3>
<div class="outline-text-3" id="text-orgd27dd88">
<p>
Org file 的基础配置
</p>
<pre class="example" id="org267b1b9">
#+title: 文章标题
#+date: [2022-09-10 Sat]
#+hugo_tags: tags1 tags2
#+hugo_categories: Class
#+hugo_draft: true
</pre>

<p>
解释如下：
</p>
<ul class="org-ul">
<li><code>title</code>, 文章标题</li>
<li><code>date</code>, 文章创建日期</li>
<li><code>hugo_tags</code>, 标签。空格分隔</li>
<li><code>hugo_categories</code>, 分类</li>
<li><code>hugo_draft</code>, 是否为草稿，如果是的话，不会发布</li>
</ul>

<p>
对于特定文件，可以在文件的头配置里面覆盖掉基础配置。比如“关于”页面 <code>about.org</code> 的内容：
</p>
<pre class="example" id="org0f83331">
#+hugo_base_dir:../blog/
#+hugo_section: ./
#+hugo_auto_set_lastmod: t
#+hugo_custom_front_matter: :toc false
</pre>
<p>
这样就使得输出的 <code>about.md</code> 直接在 <code>blog/content/</code> 下面，覆盖了 <code>.emacs</code> 配置里面写的 <code>blog/content/posts</code>
</p>

<p>
使用命令 <code>C-c C-e H h</code> ，输出当前文件为 md，这是启动 <code>hugo server</code> 就能看到了。
</p>
</div>
</div>

<div id="outline-container-orgfb6dc1e" class="outline-3">
<h3 id="orgfb6dc1e">设置评论</h3>
<div class="outline-text-3" id="text-orgfb6dc1e">
<p>
<code>LoveIt</code> 主题给出了很多选择，我用的是 Gitalk<sup>[<a id="fnr:3.1" class="footref" href="#fn:3">3</a>]</sup> ，它是基于 Github 的 Issue 模块设计的。它十分太巧妙，用一个 Github 仓库做评论存储 —— 并不是作为 code 来存。对于每个仓库，都有一个 Issue 区域，用来记录问题和反馈。每条 issue 下面都可以评论 —— 本质上 Issue 就是一个评论区，它在 Github 的作用就是反馈问题，用来当博客评论简直舒服（当然，评论者必须登录 GitHub 之后才能评论）。
</p>

<p>
首先建立一个 Github App，我找不到在哪里，教程里面的 url 直接跳转：<a href="https://github.com/settings/applications/new" target="_blank">Register GiHub Application</a>.
</p>


<figure id="orgba12b26">
<a href="/assets/d34b1dfb262ae8296361aa62187c8c7d.png" target="_blank" target="_blank"><img src="/assets/d34b1dfb262ae8296361aa62187c8c7d.png" alt="d34b1dfb262ae8296361aa62187c8c7d.png"></a>

</figure>

<p>
之后可以到个人设置 - <code>Developer Settings</code> - <code>OAuth Apps</code> 里面管理。
</p>

<p>
建好之后会生成一个 <code>Cilent ID</code> 和一个 <code>Client Secrets</code> ，记着。
</p>

<p>
然后到 Hugo 的配置里面。如果你用的是我的配置，那么文件就在 <code>params.yaml</code> 里面，如果用的官方单文件配置，找到对应位置即可。
</p>

<p>
找到评论这一块，关键词 <code>comment</code> 。 <code>enable</code> 设为 <code>true</code> ，表示开启评论。
</p>

<p>
配置 Gitalk ， <code>enable</code> 也设为 <code>true</code> ，然加上几条配置。
</p>


<figure id="orgda22f35">
<a href="/assets/855a13a6d739e9a2ede6a3a1c84360c4.png" target="_blank" target="_blank"><img src="/assets/855a13a6d739e9a2ede6a3a1c84360c4.png" alt="855a13a6d739e9a2ede6a3a1c84360c4.png"></a>

</figure>

<ul class="org-ul">
<li><code>owner</code>, 仓库拥有者，你的 Github 昵称。</li>
<li><code>admin</code>, 仓库管理者，一个列表，里面也是你的 Github 昵称。</li>
<li><code>repo</code>, 仓库名，指明要用哪个仓库的 Issue 来存评论。我用的和博客同一个仓库，方便自动化，你也可以用其他的仓库。只需要名称，我的某个仓库 <code>fingerknight/some-repo</code> ，那么这里就填 <code>some-repo</code></li>
<li><code>clientId</code>, <code>clientSecret</code> ，就是刚才的提到的。</li>
</ul>

<p>
注意，这个 Github 仓库一定要是公开的 <code>public</code> ，不然会出现找不到。
</p>

<p>
第一次使用可能会出现如下情况：
</p>


<figure id="orgd5b3ba6">
<a href="/assets/bbb01de56c80b26da5bec455b1801c7e.png" target="_blank" target="_blank"><img src="/assets/bbb01de56c80b26da5bec455b1801c7e.png" alt="bbb01de56c80b26da5bec455b1801c7e.png"></a>

</figure>

<p>
这是因为对应的 Issue 还没建立，点 <code>使用 Github 登录</code> ，做一些授权就好了。此外，对于新的一篇文章，需要用你带着 Github 的 Cookie 去访问一次，它就会自动建立 Issue，否则，比如其他人看也会出现这个情况。
</p>

<p>
目前在 LoveIt 那边有提需求说应该把这个自动化，但目前 (2022-09-12) 还没有实现。
</p>
</div>

<div id="outline-container-org8533573" class="outline-4">
<h4 id="org8533573">LoveIt 的 Bug</h4>
<div class="outline-text-4" id="text-org8533573">
<p>
如果你有好几篇文章同时生成和发布，那么就有可能出现这个 bug ，会导致评论共用，就是 A 文章下面的评论和 B 文章下面的评论一样， A 文章下面发的评论在 B 文章那里也可以看到。
</p>

<p>
这个问题是因为二者共用了同一个 Issue ，或者说定位到了同一个 Issue 。Gitalk 是用一个 <code>id</code> 关键字区分不同文章的，你去你的 Issue 可以看到，每个 Issue 都有两个标签，一个是 <code>Gitalk</code> ，一个默认是标准格式日期（我的不是是因为我改了）。前者用来让 Gitalk 知道哪些 Issue 是用来存评论的，哪些是真的问题反馈；后者就是 <code>id</code> ，用来区分不同文章的。
</p>


<figure id="org706a151">
<a href="/assets/d37a73ac664364bf59a6680634649d5a.png" target="_blank" target="_blank"><img src="/assets/d37a73ac664364bf59a6680634649d5a.png" alt="d37a73ac664364bf59a6680634649d5a.png"></a>

</figure>

<p>
LoveIt 的默认 <code>id</code> 是写死的，就是 <code>Date</code> ，所以如果几篇文章同时发布， <code>Date</code> 就是一样的，那就会定位到同一个 Issue 。
</p>

<p>
2022-09-11 我已经向项目提了一个 <a href="https://github.com/dillonzq/LoveIt/issues/743" target="_blank">Bug 的 Issue</a> ，等待后续结果。
</p>

<p>
手动改如下。在 <code>blog/themes/LoveIt/layouts/partials/comment.html</code> 里面边，找到 Gitalk 相关代码：
</p>


<figure id="org1ffdaa3">
<a href="/assets/209d9c3ab20e3c8b4a658e73050561e5.png" target="_blank" target="_blank"><img src="/assets/209d9c3ab20e3c8b4a658e73050561e5.png" alt="209d9c3ab20e3c8b4a658e73050561e5.png"></a>

</figure>

<p>
把图示中 <code>id</code> 后面的 <code>.Date</code> 给改掉。 Gitalk 官网说长度小于 50 ，参照网友的意见用 MD5 摘要，所以我改成 <code>(md5 .File.Path)</code> ，文章相对于 <code>blog/content/</code> 的相对路径的 MD5 摘要。
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orga7ddbf6" class="outline-2">
<h2 id="orga7ddbf6">工作流程</h2>
<div class="outline-text-2" id="text-orga7ddbf6">
<p>
至此<b>一个博客就搭建好了</b>，接下来说明它的工作流程。
</p>
<ol class="org-ol">
<li>编写 org 文件。把博客文章的内容写到 org 文件中，记得加头部设置。</li>
<li>格式化 org 为 md。使用命令 <code>C-c C-e H h</code> 格式化。</li>
<li>发布成 HTML。把所有要发布的内容格式化成 md 后，可以 <code>hugo server</code> 测试一下，或者直接发布，使用 <code>hugo</code> 就可以看到 <code>project/docs</code> 目录下生成了站点文件。</li>
<li>最后提交到 Github</li>
</ol>
<div class="org-src-container">
<pre class="bash"> git<span class="w"> </span>add<span class="w"> </span>*
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;注释&quot;</span>
git<span class="w"> </span>push
 </pre>
</div>

<p>
等一会儿再去访问你的 github.io 应该就好了。
</p>
</div>
</div>

<div id="outline-container-orgc2e53c7" class="outline-2">
<h2 id="orgc2e53c7">自动化</h2>
<div class="outline-text-2" id="text-orgc2e53c7">
<p>
如果每次都那么搞就太麻烦了。因此我写了一些东西，使得整个流程直接一步到位，可以参考。
</p>

<p>
地址：<a href="https://github.com/fingerknight/org-hugo-lazy.el" target="_blank">https://github.com/fingerknight/org-hugo-lazy.el</a>，这个流程就是基于我上述的搭建过程写的，如果你是完全按照我上面的搭建 Hugo ，那么这个扩展应该很容易上手。
</p>
</div>
</div>

<div id="outline-container-org21fc66c" class="outline-2">
<h2 id="org21fc66c">优化</h2>
<div class="outline-text-2" id="text-org21fc66c">
</div>
<div id="outline-container-org24db0eb" class="outline-3">
<h3 id="org24db0eb">CDN 设置</h3>
<div class="outline-text-3" id="text-org24db0eb">
<p>
复制 LoveIt 目录 <code>themes/LoveIt/assets/data/cdn/</code> 到../blog/assets/data/cdn/~ (<code>assets</code> 需要自己创)<sup>[<a id="fnr:4.1" class="footref" href="#fn:4">4</a>]</sup>。
</p>
</div>
</div>

<div id="outline-container-org8db9a77" class="outline-3">
<h3 id="org8db9a77">Cloudflare Page</h3>
<div class="outline-text-3" id="text-org8db9a77">
<p>
Cloudflare Page 也可以直接托管静态站点了，它是联动 GitHub ，把仓库的 HTML 等站点文件克隆到它的服务器然后部署。参考《<a href="https://zhuanlan.zhihu.com/p/416269228" target="_blank">几分钟、零基础搭建个人网页！- 高速直连，基于Cloudflare Page - 知乎</a>》。
</p>
</div>
</div>

<div id="outline-container-org31249e6" class="outline-3">
<h3 id="org31249e6">Cloudflare + DNS</h3>
<div class="outline-text-3" id="text-org31249e6">
<p>
我是自己注册了一个域名，然后用 Cloudflare 托管，具体可以参考我的另一篇博客《<a href="/post/20221223T150015" target="_blank">GiHub Page + Cloudflare + NameSilo 的域名配置</a>》
</p>
</div>
</div>
</div>

<div id="outline-container-org41957e2" class="outline-2">
<h2 id="org41957e2">后记</h2>
<div class="outline-text-2" id="text-org41957e2">
<p>
搞了好几天终于算可以了，留一些尾巴后面处理。
</p>
<ul class="org-ul">
<li class="on"><code>[X]</code> 评论功能</li>
<li class="on"><code>[X]</code> CDN 加速</li>
<li class="on"><code>[X]</code> 样式调一下，这个主题整体显得比较挤，还有字体。如果有精力把配色也改一下</li>
<li class="off"><code>[&#xa0;]</code> 还有就是 SEO 、挂友链，挤进搜索引擎，增加曝光度，这个貌似 LoveIt 已经帮忙调好了。</li>
</ul>

<p>
希望对你有帮助！
</p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="text-footnotes" role="doc-endnotes">
<ol>
<li id="fn:1">
<p class="footpara">
<a href="https://www.jianshu.com/p/c5297a8bb1e7" target="_blank">Hugo 不完美教程 - II: Hugo 目录组织 - 简书</a>
<a href="#fnr:1.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
<li id="fn:2">
<p class="footpara">
<a href="https://wowow005.github.io/posts/20../%E5%A6%82%E4%BD%95%E7%94%A8hugo%E5%92%8Corg-mode%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" target="_blank">如何用 hugo 和 org-mode 搭建个人博客 - 牧师的博客</a>
<a href="#fnr:2.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
<li id="fn:3">
<p class="footpara">
Gitalk: <a href="https://github.com/gitalk/gitalk/" target="_blank">https://github.com/gitalk/gitalk/</a>
<a href="#fnr:3.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
<li id="fn:4">
<p class="footpara">
<a href="https://www.techkoala.top/hugo_loveit_q_a/" target="_blank">Hugo 搭配 LoveIt 技巧总结 - TechKoala - Input/Output</a>
<a href="#fnr:4.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
</div>
</div>
</div>
<div id="footer">
<center> The End </center></div>
</body>
</html>
