<!DOCTYPE html>
<html>
<head>
<title>Emacs org drill 个人单词本 - 手指骑士的病房</title>
<link rel="icon" href="/static/favicon.ico"><link href= "/static/style/style.css" rel="stylesheet" type="text/css" /></head>
<body>
<div id="header">
<div class="home-page">
<a href="/">手指骑士的病房</a></div><div class="nav">
<div class="nav item">
<a href="/tags">标签</a>
</div>
<div class="nav item">
<a href="/archive">归档</a>
</div>
<div class="nav item">
<a href="/about">关于</a>
</div>
<div class="nav item">
<a href="/emacs">Emacs</a>
</div>
</div>
</div>
<div id="main">
<div id="toc">
<h2 class="toc-title"> TOC </h2>
<nav id="TableOfContents">

<ul>
<li>
<a href="#org49dcfc5"> 简介 </a></li>
<li>
<a href="#orga3c32a3"> 安装配置 </a></li>
<li>
<a href="#org179871a"> 使用 </a>
<ul>
<li>
<a href="#org580918f"> 卡片内容 </a></li>
<li>
<a href="#orgc3d2382"> 如何开始 </a></li>
<li>
<a href="#org4b0b11d"> 读入卡片 </a></li>
<li>
<a href="#org3a774e9"> 任务量 </a></li>
</ul>
</li>
<li>
<a href="#orgcae4af1"> 个人单词库制作 </a>
<ul>
<li>
<a href="#org6f5d735"> 单词库 </a></li>
<li>
<a href="#orgce366c2"> 大文件 </a></li>
</ul>
</li>
<li>
<a href="#orgcabbd27"> 后记 </a></li>
</ul>
</nav>
</div>
<div id="page">
<div id="preamble" class="status"><link rel="stylesheet" href="/static/pygments/dracula.css"><h1 class="post-title"> Emacs org drill 个人单词本 </h1>
<div class="post-date">2023-05-17</div>
<div class="taglist"><a href="/tag/emacs"> #emacs </a>
<a href="/tag/language"> #language </a>
<a href="/tag/learning"> #learning </a>
<a href="/tag/orgmode"> #orgmode </a>
</div>
</div>
<div id="content">

<div id="outline-container-org49dcfc5" class="outline-2">
<h2 id="org49dcfc5">简介</h2>
<div class="outline-text-2" id="text-org49dcfc5">
<p>
最近开始准备英语的终身学习，开始物色背单词软件，第一个想到的是 <a href="https://ankisrs.net/" target="_blank">Anki</a> 。虽然安装了，但是在 Arch Linux 官网中关于 Anki 的 wiki 提到了另一个同类项目 org-drill<sup>[<a id="fnr:1.1" class="footref" href="#fn:1">1</a>]</sup>, 我马上点开，很快啊。秉持着“ALL IN ONE”的理念，马上在 Emacs 上配置来试用，感觉还不错。
</p>

<p>
Org-Drill 是 Ord mode 的一个扩展，是一个基于分布复习算法的记背应用，简单说就是用来背东西的。
</p>

<p>
个人的 GitLab 项目地址：<a href="https://gitlab.com/phillord/org-drill/" target="_blank">https://gitlab.com/phillord/org-drill/</a>.
</p>

<p>
Fork 到 GitHub 的仓库地址：<a href="https://github.com/louietan/org-drill" target="_blank">https://github.com/louietan/org-drill</a>.
</p>

<p>
文档就在项目里边，写得还是比较详细。
</p>
</div>
</div>

<div id="outline-container-orga3c32a3" class="outline-2">
<h2 id="orga3c32a3">安装配置</h2>
<div class="outline-text-2" id="text-orga3c32a3">
<p>
可以通过 MELPA 安装，直接 <code>M-x package-install RET org-drill RET</code>, 或者克隆仓库到本地。
</p>

<p>
简单配置：
</p>

<div class="org-src-container">
<pre class="lisp"> <span class="p">(</span><span class="nb">require</span><span class="w"> </span><span class="ss">&#39;org-drill</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span><span class="w"> </span><span class="ss">&#39;org-drill-anki</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;;; config</span>
<span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-drill-maximum-items-per-session</span><span class="w"> </span><span class="nv">40</span>
<span class="w">      </span><span class="nv">org-drill-maximum-duration</span><span class="w"> </span><span class="mi">30</span><span class="w">    </span><span class="c1">; 30 minutes</span>
<span class="w">      </span><span class="c1">;; org-drill-scope &#39;directory</span>
<span class="w">      </span><span class="p">)</span>
<span class="p">(</span><span class="nv">defalias</span><span class="w"> </span><span class="ss">&#39;destructuring-bind</span><span class="w"> </span><span class="ss">&#39;cl-destructuring-bind</span><span class="p">)</span>
 </pre>
</div>

<p>
我在使用过程中会发现它报找不到 <code>destructuring-bind</code> 函数的错，然后发现这个函数现在加了个前缀 <code>cl-destructuring-bind</code>, 所以写一个昵称。
</p>
</div>
</div>

<div id="outline-container-org179871a" class="outline-2">
<h2 id="org179871a">使用</h2>
<div class="outline-text-2" id="text-org179871a">
<p>
它提供了多种卡片的类型，有普通型、填空型、双面型等，当然也支持自定义。因为是我用来背单词的，只需要用普通型的就好，有需要的可以参考文档的配置。
</p>
</div>

<div id="outline-container-org580918f" class="outline-3">
<h3 id="org580918f">卡片内容</h3>
<div class="outline-text-3" id="text-org580918f">
<p>
卡片是写在一个 <code>.org</code> 文件内：
</p>


<figure id="orgdc624f9">
<a href="/assets/a978ed296753b7a6e32dc2143532aa3c.png" target="_blank" target="_blank"><img src="/assets/a978ed296753b7a6e32dc2143532aa3c.png" alt="a978ed296753b7a6e32dc2143532aa3c.png"></a>

</figure>

<p>
一个带有 <code>drill</code> 标签的标题就是一张卡片，<b>它的第一个标题</b>就是答案。问题和答案的标题无所谓，其文本是标题下的文本。
</p>
</div>
</div>

<div id="outline-container-orgc3d2382" class="outline-3">
<h3 id="orgc3d2382">如何开始</h3>
<div class="outline-text-3" id="text-orgc3d2382">
<p>
在当前 buffer 下，执行 <code>org-drill</code> (<code>M-x org-drill RET</code>) 。它首先会读取数据，然后进入到 <code>drill session</code>.
</p>

<p>
其他的标题都会被收起来，只留下一个打了 <code>drill</code> 的标签（也就是要背的）。问题的文本会展示： forever 和它的音标 -&#x2013;&#x2014; 这里音标被隐藏了，估计是因为我用了中括号。
</p>


<figure id="orgfe36b1b">
<a href="/assets/dc85c2e3d3bdf528aec1c6c343bcaecf.png" target="_blank" target="_blank"><img src="/assets/dc85c2e3d3bdf528aec1c6c343bcaecf.png" alt="dc85c2e3d3bdf528aec1c6c343bcaecf.png"></a>

</figure>

<p>
按下<b>任意键</b>，答案就会显示。这时你会被询问记忆情况，从 0-5 打分。按下之后会记录到 <code>.org</code> 文件中，接着是下一张卡片。
</p>


<figure id="orgb008f46">
<a href="/assets/767ad25513b5b6686674dd56b5d274d1.png" target="_blank" target="_blank"><img src="/assets/767ad25513b5b6686674dd56b5d274d1.png" alt="767ad25513b5b6686674dd56b5d274d1.png"></a>

</figure>

<p>
可以使用的按键：
</p>
<ul class="org-ul">
<li><code>?</code> 查看分数的标准（按 <code>q</code> 返回）</li>
<li><code>t</code> 改当前卡片的标签，然后继续学习</li>
<li><code>q</code> 暂停学习，可通过 <code>org-drill-resume</code> 继续学习</li>
<li><code>e</code> 跳转的标题处，可以编辑标题，此时已经退出学习模式了，可通过 <code>org-drill-resume</code> 继续学习</li>
</ul>

<p>
各个分数标准为：
</p>
<ul class="org-ul">
<li>0 完全忘记</li>
<li>1 看到答案后还是要想一会儿（其他的比背单词更抽象的记忆会用的）</li>
<li>2 看到答案后就想起了</li>
<li>3 花了一小会儿还是想起来了</li>
<li>4 稍加思索就想起来</li>
<li>5 立刻记起</li>
</ul>

<p>
其中，0-2 分表示你已经记不到了，接下来还会碰到； 3-5 分表示你记住了，会安排在几天之后复习。
</p>
</div>
</div>

<div id="outline-container-org4b0b11d" class="outline-3">
<h3 id="org4b0b11d">读入卡片</h3>
<div class="outline-text-3" id="text-org4b0b11d">
<p>
org-drill 通过一个变量 <code>org-drill-scope</code> 用来指定哪些文件里的内容使用，它的值都是符号（可以是列表），根据文档它有以下类型：
</p>
<ul class="org-ul">
<li><code>file</code> 当前 buffer 的内容，忽略隐藏项目。<b>默认</b></li>
<li><code>tree</code> 当前光标的子树</li>
<li><code>file-no-restriction</code> 当前 buffer ，不论是否为隐藏</li>
<li><code>file-with-archives</code> 当前 buffer ，且与其有关联的归档文件</li>
<li><code>agenda</code> 所有 agenda 的文件</li>
<li><code>agenda-with-archives</code> 所有 agenda 的且关联的改好文件</li>
<li><code>directory</code> 与当前文件所在目录下的所有 <code>.org</code> 文件</li>
<li><code>(file1 file2 …)</code> 文件名列表，列出的文件都会被扫描</li>
</ul>
</div>
</div>

<div id="outline-container-org3a774e9" class="outline-3">
<h3 id="org3a774e9">任务量</h3>
<div class="outline-text-3" id="text-org3a774e9">
<div class="org-src-container">
<pre class="lisp"> <span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-drill-maximum-items-per-session</span><span class="w"> </span><span class="nv">40</span>
<span class="w">        </span><span class="nv">org-drill-maximum-duration</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
 </pre>
</div>

<p>
每次学习的任务量最多不超过 40 张卡片，学习时长最多不超过 30 <b>分钟</b>。
</p>
</div>
</div>
</div>

<div id="outline-container-orgcae4af1" class="outline-2">
<h2 id="orgcae4af1">个人单词库制作</h2>
<div class="outline-text-2" id="text-orgcae4af1">
</div>
<div id="outline-container-org6f5d735" class="outline-3">
<h3 id="org6f5d735">单词库</h3>
<div class="outline-text-3" id="text-org6f5d735">
<p>
我在网上找了一堆，最后找到了一个词汇列表的项目： <a href="https://github.com/jnoodle/English-Vocabulary-Word-List" target="_blank">GitHub - jnoodle/English-Vocabulary-Word-List: Common English Vocabulary Word List</a>, 它里面提供了单词列表，就是纯单词，没有音标也没有翻译。
</p>

<p>
根据另一个大佬的大佬的词典项目：<a href="https://github.com/skywind3000/ECDICT" target="_blank">GitHub - skywind3000/ECDICT: Free English to Chinese Dictionary Database</a>, 给单词列表优化，加上音标和翻译。
</p>

<p>
把两个项目都克隆下来，需要用到的分别是单词列表 <code>Oxford 3000.txt</code>, <code>Oxford 5000.txt</code> 和词典工具 <code>stardict.py</code> 以及词库（7z 压缩包）。
</p>

<p>
首先合并单词列表，3000 是基础， 5000 是扩展：
</p>

<div class="org-src-container">
<pre class="bash"> cat<span class="w"> </span><span class="s1">&#39;Oxford 3000.txt&#39;</span><span class="w"> </span><span class="s1">&#39;Oxford 5000.txt&#39;</span><span class="w"> </span><span class="p">&amp;</span>gt<span class="p">;</span><span class="w"> </span>Oxfort.txt
 </pre>
</div>

<p>
写一个 Python 脚本，用来读取单词列表，在词库中查询它的翻译：
</p>

<div class="org-src-container">
<pre class="python"> <span class="kn">from</span> <span class="nn">stardict</span> <span class="kn">import</span> <span class="n">DictCsv</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">dict_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~/pyfile/ecdict.csv&quot;</span><span class="p">)</span>
<span class="n">sdict</span> <span class="o">=</span> <span class="n">DictCsv</span><span class="p">(</span><span class="n">dict_file</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~/pyfile/Oxford.txt&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">lst</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">each</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">]</span>
<span class="c1"># 将文件分成 26 个，a.org, b.org, ...</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">97</span><span class="p">,</span><span class="mi">123</span><span class="p">):</span>
    <span class="n">char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~/drill/</span><span class="si">%s</span><span class="s2">.org&quot;</span> <span class="o">%</span> <span class="n">char</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;#+startup: overview</span><span class="se">\n</span><span class="s2">* English Words: </span><span class="si">%s</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">char</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">w</span><span class="p">:</span> <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">char</span><span class="p">,</span> <span class="n">lst</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">sdict</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;** English :drill:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">word</span> <span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;phonetic&quot;</span><span class="p">]:</span>
                <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;phonetic&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;*** Chinese</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;translation&quot;</span><span class="p">]</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
             <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
 </pre>
</div>

<p>
如果怕词库不够大，去拿这个：<a href="https://github.com/skywind3000/ECDICT-ultimate/releases/tag/1.0.0" target="_blank">https://github.com/skywind3000/ECDICT-ultimate/releases/tag/1.0.0</a>, 修改相应的代码。
</p>

<p>
在 Emacs 中配置：
</p>

<div class="org-src-container">
<pre class="lisp"> <span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-drill-scope</span>
<span class="w">      </span><span class="p">(</span><span class="nv">directory-files</span><span class="w"> </span><span class="s">&quot;~/drill/english-words/&quot;</span><span class="w"> </span><span class="no">t</span><span class="w"> </span><span class="s">&quot;[^.]&quot;</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgce366c2" class="outline-3">
<h3 id="orgce366c2">大文件</h3>
<div class="outline-text-3" id="text-orgce366c2">
<p>
如果把所有单词都放到一个 <code>.org</code> 文件的话，学习时会非常卡，加载下一张卡片需要很长时间。根据文档建议，把大文件化小，放到一个目录下。这样时间花销就只有初始化的数据加载。
</p>
</div>
</div>
</div>

<div id="outline-container-orgcabbd27" class="outline-2">
<h2 id="orgcabbd27">后记</h2>
<div class="outline-text-2" id="text-orgcabbd27">
<p>
目前暂时不考虑诸如记忆效率参数的调整，也仅用于背单词，如果后续用上了再更新。
</p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="text-footnotes" role="doc-endnotes">
<ol>
<li id="fn:1">
<p class="footpara">
<a href="https://wiki.archlinux.org/title/Anki" target="_blank">Anki - ArchWiki</a>
<a href="#fnr:1.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
</div>
</div>
</div>
<div id="footer">
<center> The End </center></div>
</body>
</html>
