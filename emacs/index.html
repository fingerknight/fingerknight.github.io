<!DOCTYPE html>
<html>
<head>
<title>Emacs 配置 - 手指骑士的病房</title>
<link rel="icon" href="/static/favicon.ico"><link href= "/static/style/style.css" rel="stylesheet" type="text/css" /></head>
<body>
<div id="header">
<div class="home-page">
<a href="/">手指骑士的病房</a></div><div class="nav">
<div class="nav item">
<a href="/tags">标签</a>
</div>
<div class="nav item">
<a href="/archive">归档</a>
</div>
<div class="nav item">
<a href="/about">关于</a>
</div>
<div class="nav item">
<a href="/emacs">Emacs</a>
</div>
</div>
</div>
<div id="main">
<div id="page">
<div id="preamble" class="status"><link rel="stylesheet" href="/static/pygments/dracula.css"><h1 class="post-title"> Emacs 配置 </h1>
</div>
<div id="content">

<div id="outline-container-org6055d62" class="outline-2">
<h2 id="org6055d62">前言</h2>
<div class="outline-text-2" id="text-org6055d62">
<p>
Emacs 配置分享，下载路径在 GitHub 上：<a href="https://github.com/fingerknight/.emacs.d" target="_blank">https://github.com/fingerknight/.emacs.d</a>.
</p>
</div>
</div>

<div id="outline-container-org2709006" class="outline-2">
<h2 id="org2709006">前配置 early-init</h2>
<div class="outline-text-2" id="text-org2709006">
</div>
<div id="outline-container-orgc44f6b0" class="outline-3">
<h3 id="orgc44f6b0">定义基本变量</h3>
<div class="outline-text-3" id="text-orgc44f6b0">
<p>
定义家目录以及四个目录分类：
</p>
<ul class="org-ul">
<li><code>opt</code> 插件的存放路径</li>
<li><code>etc</code> 插件的配置的路径</li>
<li><code>var</code> 插件的数据的路径</li>
<li><code>usr</code> 子应用</li>
</ul>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:5: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgb615d7a" class="outline-3">
<h3 id="orgb615d7a">启动加速 <sup>[<a id="fnr:1.1" class="footref" href="#fn:1">1</a>]</sup> <sup>, </sup><sup>[<a id="fnr:2.1" class="footref" href="#fn:2">2</a>]</sup></h3>
<div class="outline-text-3" id="text-orgb615d7a">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:21: unmatched '
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgb7beba7" class="outline-3">
<h3 id="orgb7beba7">编码设置 <sup>[<a id="fnr:3.1" class="footref" href="#fn:3">3</a>]</sup></h3>
<div class="outline-text-3" id="text-orgb7beba7">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:2: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org7b2390c" class="outline-3">
<h3 id="org7b2390c">GUI 设置</h3>
<div class="outline-text-3" id="text-org7b2390c">
<p>
窗口最大化，关闭各种栏栏框框。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="c1">;; GUI</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="nv">default-frame-alist</span><span class="w"> </span><span class="p">(</span><span class="nv">fullscreen</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="nv">maximized</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="nv">default-frame-alist</span><span class="w"> </span><span class="p">(</span><span class="nv">vertical-scroll-bars</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">nil</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="nv">default-frame-alist</span><span class="w"> </span><span class="p">(</span><span class="nv">horizontal-scroll-bars</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="no">nil</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="nv">default-frame-alist</span><span class="w"> </span><span class="p">(</span><span class="nv">tool-bar-lines</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="nv">default-frame-alist</span><span class="w"> </span><span class="p">(</span><span class="nv">menu-bar-lines</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="p">(</span><span class="nv">add-to-list</span><span class="w"> </span><span class="nv">default-frame-alist</span><span class="w"> </span><span class="p">(</span><span class="nv">alpha-background</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="mi">80</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgd9453fd" class="outline-3">
<h3 id="orgd9453fd">杂七杂八的设置</h3>
<div class="outline-text-3" id="text-orgd9453fd">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:18: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgc9b6dad" class="outline-3">
<h3 id="orgc9b6dad">结束 early-init</h3>
<div class="outline-text-3" id="text-orgc9b6dad">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:1: parse error near `)'
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc903e54" class="outline-2">
<h2 id="orgc903e54">插件安装</h2>
<div class="outline-text-2" id="text-orgc903e54">
<p>
我的插件安装基于 git, 把插件仓库 git 到本地，然后编译。用的是自己写的一个包，基于群友的 <a href="https://bitbucket.org/zbelial/pie" target="_blank">pie.el</a> 来写，不用它的包是因为，它是预先收集所有包，然后执行 install. 而我的想法是只要提到一个包就安装。
</p>


<div class="org-src-container">
<pre class="emacs-lisp"> zsh:13: unmatched '
 </pre>
</div>
</div>
</div>

<div id="outline-container-orge1f8c85" class="outline-2">
<h2 id="orge1f8c85">环境变量</h2>
<div class="outline-text-2" id="text-orge1f8c85">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgd2d2d2a" class="outline-2">
<h2 id="orgd2d2d2a">SetupEl</h2>
<div class="outline-text-2" id="text-orgd2d2d2a">
</div>
<div id="outline-container-org3b7e47e" class="outline-3">
<h3 id="org3b7e47e">简介</h3>
<div class="outline-text-3" id="text-org3b7e47e">
<p>
<a href="https://git.sr.ht/~pkal/setup" target="_blank">setup.el</a> 是一套宏，可以用于做包和模块的管理。与各种包管理器类似，在 <code>(setup feature ...)</code> 中通过各种关键字来实现各种各样的功能。它提供了一套基础的关键字，很基础。但是自定义关键字非常简单。
</p>

<p>
setup.el 内置关键字有：
</p>
<ul class="org-ul">
<li>上下文 <code>:with-feature</code>, <code>:with-mode</code>, <code>:with-map</code>, <code>:with-hook</code>, <code>:with-function</code></li>
<li>绑定 <code>:global</code> <code>:bind</code>, <code>:unbind</code>, <code>:rebind</code>, <code>:bind-into</code></li>
<li>包调用 <code>:package</code>, <code>:requrie</code>, <code>:as-load</code></li>
<li>赋值 <code>:option</code>, <code>:local-set</code></li>
<li>钩子 <code>:hook</code>, <code>:hook-into</code>, <code>local-hook</code></li>
<li>条件 <code>:only-if</code>, <code>:file-match</code>, <code>:when-loaded</code>, <code>:and</code>, <code>:if-package</code>, <code>:if-feature</code></li>
</ul>
<p>
看一个简单的例子：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">rainbow-delimiters</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:package</span><span class="w"> </span><span class="nv">rainbow-delimiters</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">rainbow-delimiters-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">prog-mode</span><span class="p">)</span>
<span class="w">  </span><span class="c1">;; more body</span>
<span class="w">  </span><span class="p">)</span>
 </pre>
</div>

<p>
定义了一个 <code>rainbow-delimiters</code> 的子系统； <code>:package</code> 是说如果给定的包不存在，则会通过 <code>packge-install</code> 去安装它； <code>:require</code> 就是 require 这个包； <code>:hook-into</code> 就是把 <code>rainbow-delimiters-mode</code> 添加到 <code>prog-mode-hook</code> 中。之后还可以写上各种各样的函数。
</p>

<p>
<a href="https://www.emacswiki.org/emacs/SetupEl" target="_blank">Emacs Wiki</a> 上给出了许多详细完好的例子。
</p>
</div>
</div>

<div id="outline-container-org6dc1482" class="outline-3">
<h3 id="org6dc1482">安装</h3>
<div class="outline-text-3" id="text-org6dc1482">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:2: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgadb72eb" class="outline-3">
<h3 id="orgadb72eb">子系统与上下文</h3>
<div class="outline-text-3" id="text-orgadb72eb">
<p>
<code>(setup feature)</code> 表明配置一个名为 <code>feature</code> 的子系统。这个名字可以任意，可以是已存在的包名。如果是后者，后续可以方便的传入一些参数。
</p>

<p>
setup 子系统的过程中，会保持几个变量： <code>feature</code>, <code>mode</code>, <code>map</code>, <code>hook</code>, <code>function</code>, 这几个变量都应与子系统相关联，使得子系统配置过程中变量的调用更加可靠。
</p>

<p>
<code>feature</code> 就是一个子系统，在逻辑上是一堆变量和函数的集合，不太合适也可以把它理解为 package 。feature 会延伸出其他变量的定义。
</p>

<p>
比如给定 feature 为 <code>rainbow-delimiters</code>, 在不做改动的情况下：
</p>
<ul class="org-ul">
<li>mode 是 feature 的延拓，为 <code>rainbow-delimiters-mode</code></li>
<li>function 同 mode</li>
<li>hook 是 mode 的延拓，为 <code>rainbow-delimiters-mode-hook</code></li>
<li>map 是 mode 的延拓，为 <code>rainbow-delimiters-mode-map</code></li>
</ul>

<p>
这些延拓都是为了后续使用的方便。如前面例子，要加一个 hook, 本来的写法应该是
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> (add-hook prog-mode-hook </pre>
</div>

<p>
在 setup 下是
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">prog-mode</span><span class="p">)</span>
 </pre>
</div>

<p>
<code>prog-mode</code> 会延拓成 <code>prog-mode-hook</code>; <code>:hook-into</code> 会把当前系统的 function 也就是 <code>rainbow-delimiters-mode</code> （默认情况下同 mode）加入到钩子中。如此做一番抽象，配置就显得明晰而简练。
</p>

<p>
那几个 with 相关的关键字是为了改变当前系统下的默认延拓。比较典型的例子，minad 大神开发的插件如 vertico, corfu. <code>(setup cofu)</code> 系统下的 map 默认为 <code>corfu-mode-map</code>, 因为 feature 延拓为 mode, 再延拓为 map. 但是人家实际上的 map 是 <code>corfu-map</code>, 这时就需要用 with 来改变上下文：
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:5: parse error near `)'
 </pre>
</div>

<p>
注意， <code>:with-feature</code> 和 <code>:with-mode</code> 依然会改变 function, map 和 hook, 因为它们是前二者的延拓. 只有 with 后三者不会影响其他的变量。
</p>

<p>
至此，你应该大致理解了子系统内部的几个变量的关系，以及窥探了后续绑定和使用过程的抽象所带来的便利。接下来便是对各个关键词进行介绍。
</p>
</div>
</div>

<div id="outline-container-orgefa9b5e" class="outline-3">
<h3 id="orgefa9b5e">绑定</h3>
<div class="outline-text-3" id="text-orgefa9b5e">
<p>
<code>:global</code> 用于全局绑定，无关 feature. 如 <code>(:global "RET" newline-and-indent)</code>
</p>

<p>
<code>:bind</code> 绑定到当前系统的 map. 如 <code>(:with-feature org (:bind "C-c s" org-schedule))</code>  就会在 <code>org-mode-map</code> 下绑定按键。它是 <code>after-loaded</code> 的（详见<a href="#org6aec964">自定义关键字</a>），也就是它会等当前系统加载之后才绑定（防止对应的变量还没有定义），所以展开之后其实是：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:2: parse error near `)'
 </pre>
</div>

<p>
此外，它还是 <code>repeatable</code> 的，也就是可以连续绑定，如：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:bind</span><span class="w"> </span><span class="s">&quot;C-c s&quot;</span><span class="w"> </span><span class="nv">org-schedule</span>
<span class="w">       </span><span class="s">&quot;C-s d&quot;</span><span class="w"> </span><span class="nv">org-deadlin</span><span class="p">)</span>
 </pre>
</div>

<p>
,所有五个绑定关键字都是 <code>repeatable</code>, 也就是可以连续输入。
</p>

<p>
<code>:unbind</code> 清空按键绑定， <code>:rebind</code> 重新绑定按键。
</p>

<p>
<code>:bind-into</code> 绑定特定的 map. 比如说前面的 corfu 的例子，可以不用 <code>:with-map</code> 切换上下文，直接 <code>(:bind-into corfu-map ...)</code> 即可。
</p>

<p>
除了 <code>:global</code> 的绑定都是 <code>after-loaded</code> 的，只要 feature 设置正确了，就不会出现 map 还没定义的情况。
</p>
</div>
</div>

<div id="outline-container-org579a341" class="outline-3">
<h3 id="org579a341">包调用</h3>
<div class="outline-text-3" id="text-org579a341">
<p>
前面提到过 <code>:package</code> 是用来安装包的，它指定了 shorthand （详见<a href="#org6aec964">自定义关键字</a>），所以可以用来做 feature. 如下面这个系统的 feature 是 <code>simple</code>.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:package</span><span class="w"> </span><span class="nv">simple</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
 </pre>
</div>

<p>
<code>:package</code> 是 repeatable 所以可以一次安装多个包。但是只有第一个包会作为系统的 feature. 因为我并不是用的自带 <code>package.el</code> 的安装插件，所以后续我会写一个自定义的安装插件的关键字。
</p>

<p>
<code>:require</code> 调用包，repeatable, 且有 shorthand, 所以同样可以作为系统的 feature.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">cl-lib</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
 </pre>
</div>

<p>
<code>:also-load</code> 用来 require 后续包。它是 after-loaded, 因此只要在 feature 加载之后才会调用，强调调用顺序。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">cofu</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:also-load</span><span class="w"> </span><span class="nv">corfu-popinfo</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:audoload</span><span class="w"> </span><span class="nv">corfu-mode</span><span class="p">))</span>
 </pre>
</div>
<p>
只要在使用了 <code>corfu-mode</code> 这个 autoload 后，corfu 这个 feature 加载，然后才会 requrie <code>corfu-popinfo</code>.
</p>
</div>
</div>

<div id="outline-container-orgce32b6a" class="outline-3">
<h3 id="orgce32b6a">赋值</h3>
<div class="outline-text-3" id="text-orgce32b6a">
<p>
<code>:option</code> 是一个集大成的赋值方法，它是 repeatable, 因此使用方法和 <code>setq</code> 类似。如
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">savehist-autosave-interval</span><span class="w"> </span><span class="mi">300</span>
<span class="w">         </span><span class="nv">history-length</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">         </span><span class="nv">kill-ring-max</span><span class="w"> </span><span class="mi">300</span>
<span class="w">         </span><span class="nv">history-delete-duplicates</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
 </pre>
</div>

<p>
说它集大成的之一是它集成了 <code>set-default</code> 和 <code>custom</code>, 也就是它可以用来设置 custom 的变量，且无视赋值位置，这一来便无需知晓某个变量的赋值应该是在 require 之前还是之后。
</p>

<p>
其二是因为它还能对列表进行赋值。以环境变量为例，设置都是 <code>(add-to-list 'load-path "path")</code>. 通过 <code>:option</code> 设置为 <code>(:option (prepend load-path) "path")</code>.
</p>

<p>
<code>prepend</code> 意思是把输入插入到列表前端，如果以存在则跳过。对应的是 <code>append</code>, 把输入放置到列表末尾。还有一个 <code>remove</code>, 就是把输入从列表中移除。
</p>

<p>
输入可以是一个列表，然后声名方式改变：
</p>
<ul class="org-ul">
<li><code>prepend*</code> 把输入列表中的每个元素按顺序插入到列表变量（也就是上面例子中的 <code>load-path</code> ）的开头，如果以存在则跳过</li>
<li><code>append*</code> 把输入列表中的每个元素按顺序接入到列表变量的末尾，如果以存在则跳过</li>
<li><code>remove*</code> 移除列表变量中所有在输入列表中的元素</li>
</ul>

<p>
还有一个局部赋值的关键字 <code>:local-set</code>, 使用方法与 <code>:option</code> 相同，只是它用的是 <code>setq-local</code> 来在当前 buffer 中进行局部赋值。
</p>
</div>
</div>

<div id="outline-container-org9a51ee2" class="outline-3">
<h3 id="org9a51ee2">钩子</h3>
<div class="outline-text-3" id="text-org9a51ee2">
<p>
<code>:hook</code>, repeatable, 输入的是函数，把这些函数都钩到当前系统的 hook 中。如：
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">prog-mode</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook</span><span class="w"> </span><span class="nv">hl-mode</span><span class="p">))</span>
 </pre>
</div>

<p>
用的更多的是 <code>:hook-into</code>, 同样 repeatable, 输入的是钩子，把当前系统的函数添加到这些钩子中。如把 <code>elisp-def-mode</code> 添加到钩子 <code>emacs-lisp-mode-hook</code> 和 <code>ielm-mode-hook</code> 中：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">elisp-def</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">elisp-def</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">emacs-lisp-mode</span><span class="w"> </span><span class="nv">ielm-mode</span><span class="p">))</span>
 </pre>
</div>

<p>
<code>local-hook</code> 同 <code>:hook</code>, 只是局部添加钩子。
</p>

<p>
以上的钩子操作都不是 after-loaded, 也就是需要钩子触发前 require 或 autoload 对应的函数。
</p>
</div>
</div>

<div id="outline-container-org3f916e8" class="outline-3">
<h3 id="org3f916e8">条件</h3>
<div class="outline-text-3" id="text-org3f916e8">
<p>
<code>:only-if</code> 判断条件，条件为假时整个 setup 退出。
</p>

<p>
<code>:file-match</code> 这个就是常用的 mode 匹配文件名的配置。比如要把 yaml-mode 匹配到 <code>.yml</code> 或 <code>.yaml</code> 为后缀的文件，则配置：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:2: unmatched "
 </pre>
</div>

<p>
<code>:when-loaded</code> 当系统 feature 加载之后执行的操作， <code>(:when-loaded ...)</code> 等价于 <code>(with-eval-after-load 'feature ...)</code>. 当时文档中不建议使用这个关键字，因为它潜在的使用的系统 feature, 应该明确指定等待哪个 feature 加载。后续使用改良后的 <code>:after</code> 。
</p>

<p>
<code>:if-package</code> 如果包未安装则退出， <code>:if-feature</code> 如果不是 feature (feature 未加载则退出)。简单理解，前者是看包有没有安装到本地，后者是看包有没有加载到 Emacs. 
</p>

<p>
<code>:and</code> 多个判断条件，使用同 <code>cond</code>, 当有一个为假时，setup 退出。最后一个判断 <b>*条件</b>用来修改 feature. 我自己没用过这个关键字，具体行为不太清楚。
</p>
</div>
</div>

<div id="outline-container-org6aec964" class="outline-3">
<h3 id="org6aec964">自定义关键字</h3>
<div class="outline-text-3" id="text-org6aec964">
<p>
<a href="https://www.emacswiki.org/emacs/SetupEl" target="_blank">Emacs Wiki</a> 上给出了许多有用的自定义关键字，我使用了其中一些。自定义关键字的框架是：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup-define</span><span class="w"> </span><span class="nb">:keywords</span>
<span class="w">  </span><span class="nv">macro</span>
<span class="w">  </span><span class="nv">args...</span><span class="p">)</span>
 </pre>
</div>

<p>
其中，macro 返回一段宏，args 指定关键字的属性。
</p>

<p>
setup 的执行过程就是把 body 当作宏来执行，因此关键字函数返回的便是一段宏，或者可执行的代码。
</p>
</div>

<div id="outline-container-orgcd2d146" class="outline-4">
<h4 id="orgcd2d146">:doc</h4>
<div class="outline-text-4" id="text-orgcd2d146">
<p>
先定义一个简单的 <code>:doc</code>, 用来记录当前系统的文档信息 <sup>[<a id="fnr:1.2" class="footref" href="#fn:1">1</a>]</sup>。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup-define</span><span class="w"> </span><span class="nb">:doc</span>
<span class="w">  </span><span class="p">(</span><span class="nb">lambda</span><span class="w"> </span><span class="p">(</span><span class="nv">_</span><span class="p">)</span>
<span class="w">    </span><span class="no">nil</span><span class="p">)</span>
<span class="w">  </span><span class="nb">:documentation</span><span class="w"> </span><span class="s">&quot;Document for the setup package.&quot;</span>
<span class="w">  </span><span class="nb">:repeatable</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
 </pre>
</div>

<p>
macro 返回的是 nil, 也就是这个关键词并不会真正参与到 setup 中，它的作用只是在代码中作为 document 的存在，让人看见。这里有两个参数： <code>:documentation</code> 当前关键字的文档， <code>:repeatable</code> 前面提到过的，是否可重复，如以下：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">dash</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A modern list API for Emacs.&quot;</span>
<span class="w">        </span><span class="s">&quot;https://github.com/magnars/dash.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">dash</span><span class="p">))</span>
 </pre>
</div>

<p>
看起来输入的是两个参数，但因为是 repeatable, 实际上是两个参数返回了两个宏，并不是两个参数同时传到一个宏。
</p>
</div>
</div>

<div id="outline-container-org58dffdd" class="outline-4">
<h4 id="org58dffdd">:spi</h4>
<div class="outline-text-4" id="text-org58dffdd">
<p>
写一个 <code>:spi</code> 作为 <code>:package</code> 的替代：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>

<p>
使用如下：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">compat</span><span class="w"> </span><span class="s">&quot;https://github.com/emacsmirror/compat&quot;</span>
<span class="w">             </span><span class="nv">no-littering</span><span class="w"> </span><span class="s">&quot;https://github.com/emacscollective/no-littering&quot;</span><span class="p">))</span>
 </pre>
</div>

<p>
<code>:spi</code> 的定义输入的是两个参数，同时又是 repeatable, 因此输入参数一定是偶数，两两一组传入，返回一半数量的宏。
</p>

<p>
这里定义了 <code>:shorthand</code>, 它是一个函数，传入整个关键字函数，其返回值可以作为新的 feature. 如上面的例子就是将整个 <code>(:spi compat "https://github.com/emacsmirror/compat" no-littering "https://github.com/emacscollective/no-littering")</code> 作为一个列表传入，返回的是 <code>no-littering</code>,  <code>no-littering</code> 就可以作为系统的 feature.
</p>

<p>
之所以用最后一个包作为 feature, 是因为 spi 是按顺序编译的，依赖必须在前，添加到环境变量，后面的包才找得到。
</p>
</div>
</div>

<div id="outline-container-orgfec5cec" class="outline-4">
<h4 id="orgfec5cec">:load-path</h4>
<div class="outline-text-4" id="text-orgfec5cec">
<p>
定义环境变量关键字，它可以传入一个 sexp, 把它的返回值加入环境变量，也可以是绝对路径，还可以是相对路径，相对于当前 feature 所在的路径（就是 <code>guess-path</code> ），最后返回一个 <code>add-to-list</code> 的宏。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:7: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org701ccc1" class="outline-4">
<h4 id="org701ccc1">:autoload</h4>
<div class="outline-text-4" id="text-org701ccc1">
<p>
<code>:autoload</code> 是基于当前系统的 feature 去查找，必要时用 <code>:with-feature</code> 切换上下文 <sup>[<a id="fnr:4.1" class="footref" href="#fn:4">4</a>]</sup>。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:4: parse error near `)'
 </pre>
</div>
<p>
这里有一个新的参数 <code>:signature</code> ，它是嵌入文档中的信息，用于解释输入的参数。上面给的意思就是在文档中说明输入可以是一串函数。
</p>
</div>
</div>

<div id="outline-container-org1e12510" class="outline-4">
<h4 id="org1e12510">:after</h4>
<div class="outline-text-4" id="text-org1e12510">
<p>
改良版的 <code>:when-loaded</code>, 它明确指定一个 feature 来使用 <code>with-eval-after-load</code>.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:7: parse error near `)'
 </pre>
</div>

<p>
这里有一个新的参数 <code>:indent</code> ，它用来控制 emacs 显示这段关键词相关代码时的缩进。类型是整数，表示第几个参数换行时缩进。以内置的 <code>:bind-into</code> 为例。如果不设置（即为 0），那么它就会是这样的缩进：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:bind-into</span><span class="w"> </span><span class="nv">map</span>
<span class="w">            </span><span class="s">&quot;C-c&quot;</span><span class="w"> </span><span class="nv">cmd</span><span class="p">)</span>
 </pre>
</div>

<p>
丑的过于离谱。设置 <code>:indent 1</code> 之后就会是：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:bind-into</span><span class="w"> </span><span class="nv">map</span>
<span class="w">  </span><span class="s">&quot;C-c&quot;</span><span class="w"> </span><span class="nv">cmd</span><span class="p">)</span>
 </pre>
</div>

<p>
这样看上去就舒服多了。这样应当可以理解它的作用了。
</p>
</div>
</div>

<div id="outline-container-org92843cc" class="outline-4">
<h4 id="org92843cc">:modalka</h4>
<div class="outline-text-4" id="text-org92843cc">
<p>
用来绑定 modalka-mode 下的按键。关于 modalka, 详见<a href="#org2cc31c0">全局按键绑定</a>.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:6: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org39c2057" class="outline-4">
<h4 id="org39c2057">:diminish</h4>
<div class="outline-text-4" id="text-org39c2057">
<p>
名字取自 <a href="https://github.com/myrjola/diminish.el" target="_blank">diminish.el</a> 包，用来移除当前 minor-mode 在 mode-line 上的显示 <sup>[<a id="fnr:4.2" class="footref" href="#fn:4">4</a>]</sup>。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgbfd3492" class="outline-4">
<h4 id="orgbfd3492">:advice</h4>
<div class="outline-text-4" id="text-orgbfd3492">
<p>
添加 advice, 采用的是类似 <code>define-advice</code> 的形式 <sup>[<a id="fnr:4.3" class="footref" href="#fn:4">4</a>]</sup>。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:11: unmatched "
 </pre>
</div>

<p>
使用方法：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:advice</span><span class="w"> </span><span class="nv">old-func</span><span class="w"> </span><span class="nb">:before</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">c</span><span class="p">)</span>
<span class="w">  </span><span class="nv">body</span><span class="p">)</span>

<span class="c1">;; 等价于</span>
<span class="p">(</span><span class="nb">define-advice</span><span class="w"> </span><span class="nv">old-func</span><span class="w"> </span><span class="p">(</span><span class="nb">:before</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">c</span><span class="p">))</span>
<span class="w">  </span><span class="nv">body</span><span class="p">)</span>

<span class="c1">;; 等价于</span>
<span class="p">(</span><span class="nv">advice-add</span><span class="w"> </span><span class="nv">old-func</span>
<span class="w">  </span><span class="nb">:before</span>
<span class="w">  </span><span class="p">(</span><span class="nb">lambda</span><span class="w"> </span><span class="p">()</span>
<span class="w">    </span><span class="nv">body</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org06f2401" class="outline-4">
<h4 id="org06f2401">:face</h4>
<div class="outline-text-4" id="text-org06f2401">
<p>
这个关键字和 <code>:advice</code> 一样有点无聊，但是还是把它包装起来了。通过调用 <code>set-face-attribute</code> 方法来设置字体样式。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>

<p>
这里 repeatable 出现了一种新的赋值方式，一个关联列表。前者表示公共参数的数量，后者表示各自的剩余参数的数量，t 表示全部。
</p>

<p>
以这个 <code>:face</code> 为例：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:face</span><span class="w"> </span><span class="nv">common</span>
<span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span>
<span class="w">  </span><span class="nv">c</span><span class="w"> </span><span class="nv">d</span><span class="p">)</span>
 </pre>
</div>

<p>
此时会返回两个宏，分别是 <code>(:face common a b)</code>, <code>(:face common c d)</code>. 前一个 repeatable 表示公共参数的数量，如果为 1，那么第一个参数就会都传入不同的宏中，如果为 2 就会作为前两个参数都传入不同的宏中，以此类推。
</p>

<p>
t 表示补满剩下的参数。公共参数为 1，还需传入 2 个参数，所以最终得到 2 个宏。假设公共参数为 2，还需传入 1 个参数，所以最终得到 3 个宏（总共 5 个参数）。
</p>

<p>
希望你能理解。
</p>

<p>
所以 <code>:face</code> 使用方法：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:2: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org8a98b80" class="outline-4">
<h4 id="org8a98b80">:lazy</h4>
<div class="outline-text-4" id="text-org8a98b80">
<p>
懒加载，把要执行的 body 封装到一个函数里面，执行这个函数才会释放里面的内容。比如有一些比较大的插件就可以用 lazy 封装，把封装得到的函数绑定到快捷键上，当快捷键触发时才 requrie 。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>

<p>
例子：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nb">:lazy</span><span class="w"> </span><span class="nv">dirvish</span><span class="w"> </span><span class="p">(</span><span class="nv">dirvish</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">dirvish</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">dirvish-override-dired-mode</span><span class="w"> </span><span class="no">t</span><span class="p">))</span>
 </pre>
</div>

<p>
这段代码会生成一个函数 <code>setup-lazy-dirvish</code>, 执行之后它会先 require <code>dirivsh</code>, 设置覆盖 dired mode, 最后执行 <code>(dirvish)</code>. 如果不调用这个函数，里面的 require 什么的都不会加载。一旦加载之后，再次调用 <code>setup-lazy-dirvish</code>, body 也不再会去执行，只会执行 command 也就是 <code>(dirvish)</code>. 此时 <code>(setup-lazy-dirvish)</code> 和  <code>(dirvish)</code> 已经等价了，所以快捷键绑定前者即可。
</p>
</div>
</div>

<div id="outline-container-orgd44a7ff" class="outline-4">
<h4 id="orgd44a7ff">:disabled</h4>
<div class="outline-text-4" id="text-orgd44a7ff">
<p>
停止后续setup, 用来调试或者弃用某个 feature.
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>

<p>
无参数，直接在最开始 <code>(:disabled)</code> 即可。
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbde68c4" class="outline-2">
<h2 id="orgbde68c4">基础设置</h2>
<div class="outline-text-2" id="text-orgbde68c4">
</div>
<div id="outline-container-org6a75930" class="outline-3">
<h3 id="org6a75930">Emacs 函数库</h3>
<div class="outline-text-3" id="text-org6a75930">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">dash</span><span class="w"> </span><span class="s">&quot;https://github.com/magnars/dash.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A modern list API for Emacs.&quot;</span><span class="p">))</span>

<span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="s">&quot;https://github.com/magnars/s.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;String manipulation library&quot;</span><span class="p">))</span>

<span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="s">&quot;https://github.com/rejeep/f.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Modern APIs for working with files and directories&quot;</span><span class="p">))</span>

<span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">ts</span><span class="w"> </span><span class="s">&quot;https://github.com/alphapapa/ts.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A date and time library for Emacs.&quot;</span><span class="p">))</span>

<span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">ht</span><span class="w"> </span><span class="s">&quot;https://github.com/Wilfred/ht.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;The missing hash table library for Emacs.&quot;</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-orga255ab8" class="outline-3">
<h3 id="orga255ab8">清理配置目录</h3>
<div class="outline-text-3" id="text-orga255ab8">
<p>
正常使用的话，配置目录下面会有一大堆乱七八糟的东西，看着很求不爽。幸好有 no-littering, 它内置了各种规则，把奇奇怪怪的东西分类好，这就是 <code>etc</code> 和 <code>var</code> 目录的由来。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:10: unmatched "
 </pre>
</div>
</div>
</div>

<div id="outline-container-org2cc31c0" class="outline-3">
<h3 id="org2cc31c0">全局按键绑定</h3>
<div class="outline-text-3" id="text-org2cc31c0">
<p>
如果使用 <code>:global</code> 或者 <code>global-set-key</code> 用这个来绑定全局键的话，它的优先级比较低，会被其他的 minor mode 覆盖。这里使用 modalka 来做全局按键绑定。它本质上想做的是模态编辑，它只有两种状态，就是开启和关闭的状态。因为它是一个 minor mode, 只要开了全局就几乎不会被覆盖。此外再给 minibuffer 加个 hook, 就可以实现 minibuffer 也享用这份键盘映射。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">modalka</span><span class="w"> </span><span class="s">&quot;https://github.com/mrkkrp/modalka&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A building kit to help switch to modal editing in Emacs.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">modalka</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:diminish</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">minibuffer-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">modalka-global-mode</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nb">:global</span><span class="w"> </span><span class="s">&quot;RET&quot;</span><span class="w"> </span><span class="nv">newline-and-indent</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:bind-into</span><span class="w"> </span><span class="nv">messages-buffer-mode-map</span><span class="w"> </span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="nv">quit-window</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org299c1a5" class="outline-3">
<h3 id="org299c1a5">帮助按键绑定</h3>
<div class="outline-text-3" id="text-org299c1a5">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">help-fns</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Help commands.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">describe-function</span>
<span class="w">             </span><span class="nv">describe-variable</span>
<span class="w">             </span><span class="nv">describe-key</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:modalka</span><span class="w"> </span><span class="s">&quot;C-p f&quot;</span><span class="w"> </span><span class="nv">describe-function</span>
<span class="w">            </span><span class="s">&quot;C-p v&quot;</span><span class="w"> </span><span class="nv">describe-variable</span>
<span class="w">            </span><span class="s">&quot;C-p k&quot;</span><span class="w"> </span><span class="nv">describe-key</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9068051" class="outline-2">
<h2 id="org9068051">外观设置</h2>
<div class="outline-text-2" id="text-org9068051">
</div>
<div id="outline-container-org40e0ad0" class="outline-3">
<h3 id="org40e0ad0">字体设置</h3>
<div class="outline-text-3" id="text-org40e0ad0">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:9: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org3cf38bb" class="outline-3">
<h3 id="org3cf38bb">主题设置</h3>
<div class="outline-text-3" id="text-org3cf38bb">
<p>
<a href="https://draculatheme.com/" target="_blank">Dracule Theme</a> 的忠实粉丝就是我了，恨不得整个操作系统都用上。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:4: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgb56b05d" class="outline-3">
<h3 id="orgb56b05d">图标</h3>
<div class="outline-text-3" id="text-orgb56b05d">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">all-the-icons</span><span class="w"> </span><span class="s">&quot;https://github.com/domtronn/all-the-icons.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A collection of various Icon Fonts within Emacs&quot;</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org152a985" class="outline-2">
<h2 id="org152a985">编辑设置</h2>
<div class="outline-text-2" id="text-org152a985">
</div>
<div id="outline-container-org35a5a23" class="outline-3">
<h3 id="org35a5a23">基本编辑操作</h3>
<div class="outline-text-3" id="text-org35a5a23">
<p>
定义了包括光标移动、复制粘贴、选择删除等一系列相关操作，以及快捷键定义。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:4: parse error near `)'
 </pre>
</div>

<p>
选中区域后粘贴会删除选中文本（符合日常习惯）
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">delsel</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Delete selection if you insert&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-mode</span><span class="w"> </span><span class="nv">delete-selection-mode</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w">  </span><span class="nv">after-init</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org873cc4e" class="outline-3">
<h3 id="org873cc4e">文件自动刷新</h3>
<div class="outline-text-3" id="text-org873cc4e">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">autorevert</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Revert buffers when files on disk change&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-hook</span><span class="w"> </span><span class="nv">find-file-hook</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook</span><span class="w"> </span><span class="nv">global-auto-revert-mode</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org6cbdccb" class="outline-3">
<h3 id="org6cbdccb">保存历史记录和光标位置</h3>
<div class="outline-text-3" id="text-org6cbdccb">
<p>
我确实没想到还能在这种地方 hook, 看了前辈的配置直接震惊一整晚 <sup>[<a id="fnr:2.2" class="footref" href="#fn:2">2</a>]</sup>。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:13: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org75d5550" class="outline-3">
<h3 id="org75d5550">窗口设置</h3>
<div class="outline-text-3" id="text-org75d5550">
</div>
<div id="outline-container-org6d172be" class="outline-4">
<h4 id="org6d172be">窗口分割</h4>
<div class="outline-text-4" id="text-org6d172be">
<p>
选择 buffer, 水平或垂直分隔。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">window</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Operations about windows&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/split-window-right</span><span class="w"> </span><span class="p">(</span><span class="nv">buffer</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="k">interactive</span><span class="w"> </span><span class="s">&quot;bChoose buffer: </span>
<span class="s">&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">select-window</span><span class="w"> </span><span class="p">(</span><span class="nv">split-window-right</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nv">switch-to-buffer</span><span class="w"> </span><span class="nv">buffer</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/split-window-below</span><span class="w"> </span><span class="p">(</span><span class="nv">buffer</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="k">interactive</span><span class="w"> </span><span class="s">&quot;bChoose buffer: </span>
<span class="s">&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nf">select-window</span><span class="w"> </span><span class="p">(</span><span class="nv">split-window-below</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nv">switch-to-buffer</span><span class="w"> </span><span class="nv">buffer</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:modalka</span><span class="w"> </span><span class="s">&quot;C-x 2&quot;</span><span class="w"> </span><span class="nv">dust/split-window-below</span>
<span class="w">            </span><span class="s">&quot;C-x 3&quot;</span><span class="w"> </span><span class="nv">dust/split-window-right</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org06d8a00" class="outline-4">
<h4 id="org06d8a00">窗口间移动</h4>
<div class="outline-text-4" id="text-org06d8a00">
<p>
使用数字编号在窗口间快速移动。原包好久不维护了，define-minor-mode 没有用关键字参数导致一直报 warning. 于是用了 pr 列表里面的一个 fork.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">winum</span><span class="w"> </span><span class="s">&quot;https://github.com/norris-young/emacs-winum&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Navigate Emacs windows and frames using numbers &quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">winum-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">window-setup-hook</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:modalka</span><span class="w"> </span><span class="s">&quot;M-0&quot;</span><span class="w"> </span><span class="nv">winum-select-window-0</span>
<span class="w">            </span><span class="s">&quot;M-1&quot;</span><span class="w"> </span><span class="nv">winum-select-window-1</span>
<span class="w">            </span><span class="s">&quot;M-2&quot;</span><span class="w"> </span><span class="nv">winum-select-window-2</span>
<span class="w">            </span><span class="s">&quot;M-3&quot;</span><span class="w"> </span><span class="nv">winum-select-window-3</span>
<span class="w">            </span><span class="s">&quot;M-4&quot;</span><span class="w"> </span><span class="nv">winum-select-window-4</span>
<span class="w">            </span><span class="s">&quot;M-5&quot;</span><span class="w"> </span><span class="nv">winum-select-window-5</span>
<span class="w">            </span><span class="s">&quot;M-6&quot;</span><span class="w"> </span><span class="nv">winum-select-window-6</span>
<span class="w">            </span><span class="s">&quot;M-7&quot;</span><span class="w"> </span><span class="nv">winum-select-window-7</span>
<span class="w">            </span><span class="s">&quot;M-8&quot;</span><span class="w"> </span><span class="nv">winum-select-window-8</span>
<span class="w">            </span><span class="s">&quot;M-9&quot;</span><span class="w"> </span><span class="nv">winum-select-window-9</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">winum-auto-assign-0-to-minibuffer</span><span class="w"> </span><span class="no">t</span>
<span class="w">           </span><span class="nv">winum-auto-setup-mode-line</span><span class="w"> </span><span class="no">t</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5633108" class="outline-3">
<h3 id="org5633108">括号增强</h3>
<div class="outline-text-3" id="text-org5633108">
</div>
<div id="outline-container-orgae76a23" class="outline-4">
<h4 id="orgae76a23">高亮括号</h4>
<div class="outline-text-4" id="text-orgae76a23">
<p>
高亮包围当前光标位置的括号，并用方框标识。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:14: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org231a7bd" class="outline-4">
<h4 id="org231a7bd">Smart Parens</h4>
<div class="outline-text-4" id="text-org231a7bd">
<p>
增强版的 electric-pair-mode, 同时提供了一些基于括号的操作，参见<a href="https://ebzzry.com/en/emacs-pairs/" target="_blank">Emacs and Pairs</a>.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">smartparens</span><span class="w"> </span><span class="s">&quot;https://github.com/Fuco1/smartparens&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A minor mode for dealing with pairs in Emacs.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:lazy</span><span class="w"> </span><span class="nv">sp</span><span class="w"> </span><span class="no">nil</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">smartparens-config</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:diminish</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:with-mode</span><span class="w"> </span><span class="nv">turn-on-smartparens-strict-mode</span>
<span class="w">      </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">prog-mode</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">smartparens-global-mode</span><span class="w"> </span><span class="no">t</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:bind-into</span><span class="w"> </span><span class="nv">smartparens-mode-map</span>
<span class="w">      </span><span class="s">&quot;M-a&quot;</span><span class="w"> </span><span class="nv">sp-beginning-of-sexp</span>
<span class="w">      </span><span class="s">&quot;M-b&quot;</span><span class="w"> </span><span class="nv">sp-end-of-sexp</span>

<span class="w">      </span><span class="s">&quot;M-s&quot;</span><span class="w"> </span><span class="nv">sp-backward-up-sexp</span>
<span class="w">      </span><span class="s">&quot;M-d&quot;</span><span class="w"> </span><span class="nv">sp-down-sexp</span>

<span class="w">      </span><span class="s">&quot;M-\&quot; sp-unwrap-sexp</span>
<span class="s">      &quot;</span><span class="nv">M-</span><span class="p">]</span><span class="s">&quot; sp-forward-slurp-sexp</span>
<span class="s">      &quot;</span><span class="nv">M-</span><span class="p">[</span><span class="s">&quot; sp-backward-slurp-sexp</span>
<span class="s">      &quot;</span><span class="nv">M-{</span><span class="s">&quot; sp-forward-barf-sexp</span>
<span class="s">      &quot;</span><span class="nv">M-}</span><span class="s">&quot; sp-backward-barf-sexp</span>

<span class="s">      &quot;</span><span class="nv">M-m</span><span class="s">&quot; sp-select-next-thing</span>
<span class="s">      &quot;</span><span class="nv">C-d</span><span class="w"> </span><span class="nv">C-l</span><span class="s">&quot; sp-kill-whole-line</span>
<span class="s">      &quot;</span><span class="nv">C-d</span><span class="w"> </span><span class="nv">C-d</span><span class="s">&quot; sp-kill-sexp</span>

<span class="s">      &quot;</span><span class="nv">M-j</span><span class="s">&quot; sp-next-sexp</span>
<span class="s">      &quot;</span><span class="nv">M-k</span><span class="s">&quot; sp-previous-sexp</span>
<span class="s">      &quot;</span><span class="nv">M-l</span><span class="s">&quot; sp-forward-symbol</span>
<span class="s">      &quot;</span><span class="nv">M-h</span><span class="s">&quot; sp-backward-symbol))</span>
<span class="s">  (:with-function setup-lazy-sp</span>
<span class="s">    (:hook-into window-setup)))</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org84b8042" class="outline-3">
<h3 id="org84b8042">补全增强</h3>
<div class="outline-text-3" id="text-org84b8042">
</div>
<div id="outline-container-org4716dda" class="outline-4">
<h4 id="org4716dda">补全前端</h4>
<div class="outline-text-4" id="text-org4716dda">
<p>
弹框补全 corfu. 图标用的是 kind-all-the-icons, 源自论坛大佬：<a href="https://emacs-china.org/t/corfu-all-the-icons-icon/20907" target="_blank">糊了一个 corfu 适用的 all-the-icons 的 icon 效果 - Emacs-general - Emacs China</a>。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:23: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org7c6c5fe" class="outline-4">
<h4 id="org7c6c5fe">补全后端</h4>
<div class="outline-text-4" id="text-org7c6c5fe">
<p>
cape 提供了多种补全后端，目前用得并不多。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:6: parse error near `;;'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgb7798cd" class="outline-4">
<h4 id="orgb7798cd">补全模版</h4>
<div class="outline-text-4" id="text-orgb7798cd">
<p>
暂时用这个，目前还没开始填自己的模版。用着感觉没 Yasnippet 方便。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:6: parse error near `;;'
 </pre>
</div>

<p>
模板：
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="nv">python-mode</span>

<span class="p">(</span><span class="nv">name</span><span class="w"> </span><span class="s">&quot;if __name__ == \&quot;__main__\&quot;:&quot;</span><span class="w"> </span><span class="nv">n&gt;</span><span class="p">)</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga9c7708" class="outline-3">
<h3 id="orga9c7708">Minibuffer 增强</h3>
<div class="outline-text-3" id="text-orga9c7708">
<p>
新三件套 (vertico, orderless, consult)
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:1: unknown sort specifier
 </pre>
</div>

<p>
给 minibuffer 的 eval 加上 corfu 补全和 smart parens 括号增强。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:5: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org381180b" class="outline-3">
<h3 id="org381180b">Isearch 增强</h3>
<div class="outline-text-3" id="text-org381180b">
<p>
使用 phi-search,
</p>
<ul class="org-ul">
<li>支持 emacs-rime</li>
<li>支持 modalka 的 minibuffer</li>
</ul>

<p>
我加了一个 hook 使得每次打开 phi-search 的时候都会自动输入上次搜索的字符串，然后选中。如果需要，直接 phi-search-next; 若不要，直接输入新字符即可。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">phi-search</span><span class="w"> </span><span class="s">&quot;https://github.com/zk-phi/phi-search&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Another incremental search &amp; replace&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">phi-search</span><span class="w"> </span><span class="nv">phi-search-backward</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:modalka</span><span class="w"> </span><span class="s">&quot;C-.&quot;</span><span class="w"> </span><span class="nv">phi-search</span>
<span class="w">            </span><span class="s">&quot;C-,&quot;</span><span class="w"> </span><span class="nv">phi-search-backward</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">phi-search-limit</span><span class="w"> </span><span class="mi">10000</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:when-loaded</span>
<span class="w">    </span><span class="p">(</span><span class="k">defvar</span><span class="w"> </span><span class="nv">dust/phi-search--last-search</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:advice</span><span class="w"> </span><span class="nv">phi-search--search-initialize</span><span class="w"> </span><span class="nb">:before</span><span class="w"> </span><span class="p">(</span><span class="kp">&amp;rest</span><span class="w"> </span><span class="nv">_</span><span class="p">)</span>
<span class="w">      </span><span class="p">(</span><span class="nb">unless</span><span class="w"> </span><span class="p">(</span><span class="nv">use-region-p</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">dust/phi-search--last-search</span><span class="w"> </span><span class="nv">phi-search--last-executed</span><span class="p">))))</span>

<span class="w">  </span><span class="p">(</span><span class="nb">:with-hook</span><span class="w"> </span><span class="nv">phi-search-init-hook</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/insert-last-search</span><span class="w"> </span><span class="p">()</span>
<span class="w">      </span><span class="s">&quot;Use last search if no region actives.&quot;</span>
<span class="w">      </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="nv">dust/phi-search--last-search</span>
<span class="w">        </span><span class="p">(</span><span class="nf">insert</span><span class="w"> </span><span class="nv">dust/phi-search--last-search</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nv">mark-whole-buffer</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook</span><span class="w"> </span><span class="nv">dust/insert-last-search</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nb">:with-feature</span><span class="w"> </span><span class="nv">phi-replace</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">phi-replace-query</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:modalka</span><span class="w"> </span><span class="s">&quot;C-f C-r&quot;</span><span class="w"> </span><span class="nv">phi-replace-query</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge9ecb43" class="outline-2">
<h2 id="orge9ecb43">编程</h2>
<div class="outline-text-2" id="text-orge9ecb43">
</div>
<div id="outline-container-org733ca88" class="outline-3">
<h3 id="org733ca88">显示</h3>
<div class="outline-text-3" id="text-org733ca88">
</div>
<div id="outline-container-org623a48b" class="outline-4">
<h4 id="org623a48b">行号</h4>
<div class="outline-text-4" id="text-org623a48b">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org7676cc5" class="outline-4">
<h4 id="org7676cc5">高亮当前行</h4>
<div class="outline-text-4" id="text-org7676cc5">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">hl-line</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Highlight the current line&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">prog-mode</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org7128d6b" class="outline-4">
<h4 id="org7128d6b">彩色括号</h4>
<div class="outline-text-4" id="text-org7128d6b">
<p>
对不同层次的括号使用不同颜色，对 Lisp 这种多重括号尤其有效。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">rainbow-delimiters</span><span class="w"> </span><span class="s">&quot;https://github.com/Fanael/rainbow-delimiters&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Highlight delimiters according to their depth.&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">rainbow-delimiters-mode</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">prog-mode</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org3c6d9dc" class="outline-4">
<h4 id="org3c6d9dc">不显示 eldoc</h4>
<div class="outline-text-4" id="text-org3c6d9dc">
<p>
还要单独为这个写一个 setup, 多捞哦。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">eldoc</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Show function arglist or variable docstring in echo area&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:diminish</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>
<div id="outline-container-orgf29aae3" class="outline-4">
<h4 id="orgf29aae3">缩进提示</h4>
<div class="outline-text-4" id="text-orgf29aae3">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:7: parse error near `)'
 </pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga1ecadb" class="outline-3">
<h3 id="orga1ecadb">移动到缩进行首</h3>
<div class="outline-text-3" id="text-orga1ecadb">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">mwim</span><span class="w"> </span><span class="s">&quot;https://github.com/alezost/mwim.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Operations of Cursor moving&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">mwim-beginning-of-code-or-line</span>
<span class="w">             </span><span class="nv">mwim-end-of-code-or-line</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defalias</span><span class="w"> </span><span class="nv">dust/beginning-of-line</span><span class="w"> </span><span class="nv">mwim-beginning-of-code-or-line</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">defalias</span><span class="w"> </span><span class="nv">dust/end-of-line</span><span class="w"> </span><span class="nv">mwim-end-of-code-or-line</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org7981f6b" class="outline-3">
<h3 id="org7981f6b">代码折叠</h3>
<div class="outline-text-3" id="text-org7981f6b">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">hideshow</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Minor mode cmds to selectively display code/comment blocks&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-mode</span><span class="w"> </span><span class="nv">hs-minor-mode</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:diminish</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">prog-mode</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:bind</span><span class="w"> </span><span class="s">&quot;C-c C-v C-c&quot;</span><span class="w"> </span><span class="nv">hs-toggle-hiding</span>
<span class="w">           </span><span class="s">&quot;C-c C-v C-h&quot;</span><span class="w"> </span><span class="nv">hs-hide-block</span>
<span class="w">           </span><span class="s">&quot;C-c C-v C-s&quot;</span><span class="w"> </span><span class="nv">hs-show-block</span>
<span class="w">           </span><span class="s">&quot;C-c C-v C-t&quot;</span><span class="w"> </span><span class="nv">hs-hide-all</span>
<span class="w">           </span><span class="s">&quot;C-c C-v C-a&quot;</span><span class="w"> </span><span class="nv">hs-show-all</span>
<span class="w">           </span><span class="s">&quot;C-c C-v C-l&quot;</span><span class="w"> </span><span class="nv">hs-hide-level</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>
<div id="outline-container-org65805aa" class="outline-3">
<h3 id="org65805aa">LSP</h3>
<div class="outline-text-3" id="text-org65805aa">
<p>
不搞开发，能用就行。不 hook <code>prog-mode</code> 的原因是写比如 elisp 就没必要启动用它。
</p>

<p>
<code>:only-if</code> 不让它在 TUI 下使用。这样便可用 <code>emacs -nw</code> 来替代 vim 了。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">eglot</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A emacs LSP client&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">eglot-ensure</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-function</span><span class="w"> </span><span class="nv">eglot-ensure</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">python-mode</span>
<span class="w">                </span><span class="nv">yaml-mode</span>
<span class="w">                </span><span class="nv">js-mode</span>
<span class="w">                </span><span class="nv">mhtml-mode</span>
<span class="w">                </span><span class="nv">scss-mode</span>
<span class="w">                </span><span class="nv">latex-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">eldoc-echo-area-use-multiline-p</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>
<div id="outline-container-org67d4f90" class="outline-3">
<h3 id="org67d4f90">YAML</h3>
<div class="outline-text-3" id="text-org67d4f90">
<p>
偶尔会用到。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:4: unmatched "
 </pre>
</div>
</div>
</div>

<div id="outline-container-org1905fde" class="outline-3">
<h3 id="org1905fde">Emacs Lisp</h3>
<div class="outline-text-3" id="text-org1905fde">
</div>
<div id="outline-container-org2a890e8" class="outline-4">
<h4 id="org2a890e8">elisp-def</h4>
<div class="outline-text-4" id="text-org2a890e8">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">elisp-def</span><span class="w"> </span><span class="s">&quot;https://github.com/Wilfred/elisp-def&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Go to the definition of the symbol at point.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">elisp-def-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">emacs-lisp-mode</span><span class="w"> </span><span class="nv">ielm-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:diminish</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org240be91" class="outline-3">
<h3 id="org240be91">Yuck</h3>
<div class="outline-text-3" id="text-org240be91">
<p>
Yuck 是窗口图形模块套件 <a href="https://elkowar.github.io/eww/" target="_blank">EWW</a> 的语言，基于 Lisp.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:4: unmatched "
 </pre>
</div>
</div>
</div>

<div id="outline-container-org80fd197" class="outline-3">
<h3 id="org80fd197">Sxhkd</h3>
<div class="outline-text-3" id="text-org80fd197">
<p>
bspwm 下的键盘映射配置。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">sxhkd-mode</span><span class="w"> </span><span class="s">&quot;https://github.com/xFA25E/sxhkd-mode&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A major mode for editing sxhkdrc&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">sxhkd-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:file-match</span><span class="w"> </span><span class="p">(</span><span class="nb">rx</span><span class="w"> </span><span class="s">&quot;sxhkdrc&quot;</span><span class="w"> </span><span class="nv">string-end</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org7426caf" class="outline-3">
<h3 id="org7426caf">Jinja2</h3>
<div class="outline-text-3" id="text-org7426caf">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:4: unmatched "
 </pre>
</div>
</div>
</div>

<div id="outline-container-org88f1f3e" class="outline-3">
<h3 id="org88f1f3e">Markdown</h3>
<div class="outline-text-3" id="text-org88f1f3e">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:5: unmatched "
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc77ad26" class="outline-2">
<h2 id="orgc77ad26">Org mode</h2>
<div class="outline-text-2" id="text-orgc77ad26">
<p>
Org mode 原本是一个基于 outline 的任务管理，但是因为提供了丰富的语言标记，以及结合 emacs 提供导出、发布等各种操作，它已然成为一个强大的笔记、管理、收集等集一体的系统。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:10: parse error near `)'
 </pre>
</div>
</div>

<div id="outline-container-org2c62c6d" class="outline-3">
<h3 id="org2c62c6d">快速改变 heading</h3>
<div class="outline-text-3" id="text-org2c62c6d">
<p>
通过快捷键来快速调整 headline 等级。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">dust/org-heading</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:after</span><span class="w"> </span><span class="nv">org</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">s</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/org-headline-set</span><span class="w"> </span><span class="p">(</span><span class="nv">N</span><span class="p">)</span>
<span class="w">      </span><span class="s">&quot;Set org headline&quot;</span>
<span class="w">      </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="p">(</span><span class="nv">org-at-heading-p</span><span class="p">)</span>
<span class="w">                 </span><span class="p">(</span><span class="nf">/=</span><span class="w"> </span><span class="nv">N</span>
<span class="w">                     </span><span class="p">(</span><span class="k">save-excursion</span>
<span class="w">                       </span><span class="p">(</span><span class="nf">beginning-of-line</span><span class="p">)</span>
<span class="w">                       </span><span class="p">(</span><span class="nf">length</span>
<span class="w">                        </span><span class="p">(</span><span class="nf">nth</span><span class="w"> </span><span class="mi">1</span>
<span class="w">                             </span><span class="p">(</span><span class="nv">s-match</span><span class="w"> </span><span class="nv">org-heading-regexp</span>
<span class="w">                                      </span><span class="p">(</span><span class="nf">buffer-substring-no-properties</span>
<span class="w">                                       </span><span class="p">(</span><span class="nf">point</span><span class="p">)</span>
<span class="w">                                       </span><span class="p">(</span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="nf">point</span><span class="p">)</span><span class="w"> </span><span class="mi">10</span><span class="p">))))))))</span>
<span class="w">        </span><span class="p">(</span><span class="nv">org-toggle-heading</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="k">and</span><span class="w"> </span><span class="p">(</span><span class="nf">&gt;=</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                 </span><span class="p">(</span><span class="nf">&lt;=</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="mi">6</span><span class="p">))</span>
<span class="w">        </span><span class="p">(</span><span class="nv">org-toggle-heading</span><span class="w"> </span><span class="nv">N</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/org-headline-set-1</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">dust/org-headline-set</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/org-headline-set-2</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">dust/org-headline-set</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/org-headline-set-3</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">dust/org-headline-set</span><span class="w"> </span><span class="mi">3</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/org-headline-set-4</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">dust/org-headline-set</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/org-headline-set-5</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">dust/org-headline-set</span><span class="w"> </span><span class="mi">5</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/org-headline-set-6</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">dust/org-headline-set</span><span class="w"> </span><span class="mi">6</span><span class="p">))</span>

<span class="w">    </span><span class="p">(</span><span class="nb">:bind-into</span><span class="w"> </span><span class="nv">org-mode-map</span>
<span class="w">      </span><span class="s">&quot;C-c h 1&quot;</span><span class="w"> </span><span class="nv">dust/org-headline-set-1</span>
<span class="w">      </span><span class="s">&quot;C-c h 2&quot;</span><span class="w"> </span><span class="nv">dust/org-headline-set-2</span>
<span class="w">      </span><span class="s">&quot;C-c h 3&quot;</span><span class="w"> </span><span class="nv">dust/org-headline-set-3</span>
<span class="w">      </span><span class="s">&quot;C-c h 4&quot;</span><span class="w"> </span><span class="nv">dust/org-headline-set-4</span>
<span class="w">      </span><span class="s">&quot;C-c h 5&quot;</span><span class="w"> </span><span class="nv">dust/org-headline-set-5</span>
<span class="w">      </span><span class="s">&quot;C-c h 6&quot;</span><span class="w"> </span><span class="nv">dust/org-headline-set-6</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org309c5f9" class="outline-3">
<h3 id="org309c5f9">快速插入</h3>
<div class="outline-text-3" id="text-org309c5f9">
<ol class="org-ol">
<li>输入一个 URL, 尝试自动获取返回的 HTML 的 <code>&lt;title&gt;</code>, 如果有就把它作为 org-link 的 description.</li>
<li>给定一个存放图片的目录，按最近修改时间排序</li>
<li>按键录入</li>
</ol>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:15: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org75bb94c" class="outline-3">
<h3 id="org75bb94c">Org Agenda</h3>
<div class="outline-text-3" id="text-org75bb94c">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:12: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org2c7b0b2" class="outline-3">
<h3 id="org2c7b0b2">样式美化</h3>
<div class="outline-text-3" id="text-org2c7b0b2">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:19: unmatched `
 </pre>
</div>
</div>
</div>

<div id="outline-container-org2a6bc40" class="outline-3">
<h3 id="org2a6bc40">排版</h3>
<div class="outline-text-3" id="text-org2a6bc40">
<p>
采用左右两侧留白，页面集中到中部的排版。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">olivetti</span><span class="w"> </span><span class="s">&quot;https://github.com/rnkn/olivetti&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A simple Emacs minor mode for a nice writing environment.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:diminish</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">olivetti-mode</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">olivetti-body-width</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">org-mode</span><span class="p">))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org34328bf" class="outline-3">
<h3 id="org34328bf">Latex 导出</h3>
<div class="outline-text-3" id="text-org34328bf">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:13: parse error near `'("" "xeCJK"))'
 </pre>
</div>
</div>
</div>
<div id="outline-container-orge69d048" class="outline-3">
<h3 id="orge69d048">快速查询</h3>
<div class="outline-text-3" id="text-orge69d048">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">org-super-agenda</span><span class="w"> </span><span class="s">&quot;https://github.com/alphapapa/org-super-agenda&quot;</span>
<span class="w">             </span><span class="nv">peg</span><span class="w"> </span><span class="s">&quot;https://github.com/emacsmirror/peg&quot;</span>
<span class="w">             </span><span class="nv">ov</span><span class="w"> </span><span class="s">&quot;https://github.com/emacsorphanage/ov&quot;</span>
<span class="w">             </span><span class="nv">org-ql</span><span class="w"> </span><span class="s">&quot;https://github.com/alphapapa/org-ql&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A query language for Org files.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-feature</span><span class="w"> </span><span class="nv">org-ql-search</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">org-ql-search</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-feature</span><span class="w"> </span><span class="nv">org-ql-view</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:when-loaded</span>
<span class="w">      </span><span class="p">(</span><span class="nb">:bind-into</span><span class="w"> </span><span class="nv">org-ql-view-map</span>
<span class="w">        </span><span class="s">&quot;q&quot;</span><span class="w"> </span><span class="p">(</span><span class="nb">lambda</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">interactive</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">quit-window</span><span class="w"> </span><span class="no">t</span><span class="p">))))))</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdc547ee" class="outline-2">
<h2 id="orgdc547ee">工具</h2>
<div class="outline-text-2" id="text-orgdc547ee">
</div>
<div id="outline-container-org61ea1cc" class="outline-3">
<h3 id="org61ea1cc">输入法</h3>
<div class="outline-text-3" id="text-org61ea1cc">
<p>
Emacs 的 RIME 输入法，只要断言做得好，就可以丝滑地在中英文输入法之间切换，且不会影响快捷键的使用。
</p>

<p>
在激活了 emacs-rime 后退出 emacs 会进入一段时间的卡死状态，在 Issue <a href="https://github.com/DogLooksGood/emacs-rime/issues/161#issuecomment-979907791" target="_blank">#161</a> 中给出了一个方案，就是在 emacs 关闭时主动关闭 rime-lib. 这个函数是从 so 库里面都出来的，我找不到哪里可以 with-eval-after-load. 所以我用了一个 trick, 在激活输入法后给 <code>kill-emacs-hook</code> 加上 <code>rime-lib-finalize</code>.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:19: parse error near `)'
 </pre>
</div>
</div>
</div>
<div id="outline-container-org90f5c29" class="outline-3">
<h3 id="org90f5c29">文件管理</h3>
<div class="outline-text-3" id="text-org90f5c29">
<p>
Dirvish 是一个非常优秀的文件管理器，优美的前端，集成 Dired, 它完全能够作为一个独立的基于命令行的文件管理器使用（我确实也是把它作为系统默认的文件管理器使用）
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:16: parse error near `)'
 </pre>
</div>
</div>
</div>
<div id="outline-container-orge393e8a" class="outline-3">
<h3 id="orge393e8a">中文分词</h3>
<div class="outline-text-3" id="text-orge393e8a">
<p>
基于中文分词的词语移动。Emacs 内置的 forward-word/backward-word 遇上中文会直接跑到句子结束。用了 jieba 分词就可以实现中文词语的 forward/backward.
</p>

<p>
目前只在 org mode 下开启，我对于中文分词的需求也来源于 org mode.
</p>

<p>
jieba.el 在每个 Emacs 应用打开都会启动一个 node-js 的服务器，我想把 jieba.el 作前后端分离，在我的系统中只跑一个，所有客户端都连接它即可。一来减少内存占用，二来加快启动，这样就可以全局下开启 jieba mode 而不需要考虑拖慢启动时间。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">jsonrpc</span><span class="w"> </span><span class="s">&quot;https://github.com/paritytech/jsonrpc/&quot;</span>
<span class="w">             </span><span class="nv">jieba</span><span class="w"> </span><span class="s">&quot;https://github.com/cireu/jieba.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Things about selection and deletion supporting CN words&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:diminish</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:lazy</span><span class="w"> </span><span class="nv">jieba</span><span class="w"> </span><span class="no">nil</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">jieba</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defalias</span><span class="w"> </span><span class="nv">dust/forward-word</span><span class="w"> </span><span class="nv">jieba-forward-word</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defalias</span><span class="w"> </span><span class="nv">dust/backward-word</span><span class="w"> </span><span class="nv">jieba-backward-word</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defalias</span><span class="w"> </span><span class="nv">dust/select-word-at-point</span><span class="w"> </span><span class="nv">jieba-mark-word</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">jieba-mode</span><span class="w"> </span><span class="no">t</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-function</span><span class="w"> </span><span class="nv">setup-lazy-jieba</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook-into</span><span class="w"> </span><span class="nv">org-mode</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org8f979dd" class="outline-3">
<h3 id="org8f979dd">大纲展示</h3>
<div class="outline-text-3" id="text-org8f979dd">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:15: unmatched "
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgd3ea728" class="outline-3">
<h3 id="orgd3ea728">摘抄库</h3>
<div class="outline-text-3" id="text-orgd3ea728">
<p>
自己写的一个摘抄管理，用 sqlite3 数据库。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">excerpt</span><span class="w"> </span><span class="s">&quot;https://github.com/fingerknight/excerpt.el&quot;</span>
<span class="w">             </span><span class="nv">emacsql</span><span class="w"> </span><span class="s">&quot;https://github.com/magit/emacsql&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Excerpt management&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">excerpt</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">excerpt-dir</span><span class="w"> </span><span class="p">(</span><span class="nv">no-littering-expand-var-file-name</span><span class="w"> </span><span class="s">&quot;excerpt&quot;</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-orga187fa5" class="outline-3">
<h3 id="orga187fa5">记忆工具</h3>
<div class="outline-text-3" id="text-orga187fa5">
<p>
卡片记忆方法，虽然并不是很卡片。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:15: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org0340076" class="outline-3">
<h3 id="org0340076">音乐播放器</h3>
<div class="outline-text-3" id="text-org0340076">
<p>
MPD 的前端，其实还是用的 MPC, 所以它是 MPD 前端的前端。简单但够用。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">simple-mpc</span><span class="w"> </span><span class="s">&quot;https://github.com/jorenvo/simple-mpc&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;A GNU Emacs major mode that acts as a front end to mpc.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">simple-mpc</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">simple-mpc-arguments</span><span class="w"> </span><span class="s">&quot;--host=/tmp/mpd-socket&quot;</span>
<span class="w">           </span><span class="nv">simple-mpc-playlist-format</span><span class="w"> </span><span class="s">&quot;%title%	%artist%	%time%&quot;</span>
<span class="w">           </span><span class="nv">simple-mpc-table-separator</span><span class="w"> </span><span class="s">&quot;	&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:when-loaded</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defun</span><span class="w"> </span><span class="nv">dust/simple-mpc-load-playlist</span><span class="w"> </span><span class="p">(</span><span class="nv">playlist-name</span><span class="p">)</span>
<span class="w">      </span><span class="s">&quot;Rewrite load playlist such that:</span>
<span class="s">1. Clean play list before loading;</span>
<span class="s">2. Shuffle play lists after loading.</span>
<span class="s">3. Show play list after loading.&quot;</span>
<span class="w">      </span><span class="p">(</span><span class="k">interactive</span>
<span class="w">       </span><span class="p">(</span><span class="nf">list</span>
<span class="w">        </span><span class="p">(</span><span class="nf">completing-read</span><span class="w"> </span><span class="s">&quot;Playlist: &quot;</span><span class="w"> </span><span class="p">(</span><span class="nv">simple-mpc-call-mpc-strings</span><span class="w"> </span><span class="s">&quot;lsplaylists&quot;</span><span class="p">))))</span>
<span class="w">      </span><span class="p">(</span><span class="nf">message</span><span class="w"> </span><span class="s">&quot;%s %s&quot;</span><span class="w"> </span><span class="s">&quot;Loading playlist&quot;</span><span class="w"> </span><span class="nv">playlist-name</span><span class="p">)</span>
<span class="w">      </span><span class="p">(</span><span class="nv">simple-mpc-clear-current-playlist</span><span class="p">)</span>
<span class="w">      </span><span class="p">(</span><span class="nv">simple-mpc-call-mpc</span><span class="w"> </span><span class="no">nil</span><span class="w"> </span><span class="p">(</span><span class="nf">list</span><span class="w"> </span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nv">playlist-name</span><span class="p">))</span>
<span class="w">      </span><span class="p">(</span><span class="nv">simple-mpc-shuffle-current-playlist</span><span class="p">)</span>
<span class="w">      </span><span class="p">(</span><span class="nv">simple-mpc-maybe-refresh-playlist</span><span class="p">)</span>
<span class="w">      </span><span class="p">(</span><span class="nv">simple-mpc-view-current-playlist</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span><span class="nb">defalias</span><span class="w"> </span><span class="nv">simple-mpc-load-playlist</span><span class="w"> </span><span class="nv">dust/simple-mpc-load-playlist</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org6bff2dc" class="outline-3">
<h3 id="org6bff2dc">邮件和订阅</h3>
<div class="outline-text-3" id="text-org6bff2dc">
<p>
详见
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="nv">mu4e</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;a tool for dealing with e-mail messages stored in the Maildir-format&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:load-path</span><span class="w"> </span><span class="s">&quot;/usr/share/emacs/site-lisp/mu4e/&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">mu4e</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:when-loaded</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="p">(</span><span class="nf">append</span><span class="w"> </span><span class="nv">mu4e-contexts</span><span class="p">)</span>
<span class="w">             </span><span class="p">(</span><span class="k">let*</span><span class="w"> </span><span class="p">((</span><span class="nv">context-name</span><span class="w"> </span><span class="s">&quot;outlook&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="p">(</span><span class="nv">dir-name</span><span class="w"> </span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="w"> </span><span class="nv">context-name</span><span class="p">)))</span>
<span class="w">               </span><span class="p">(</span><span class="nv">make-mu4e-context</span>
<span class="w">                </span><span class="nb">:name</span><span class="w"> </span><span class="nv">context-name</span>
<span class="w">                </span><span class="nb">:match-func</span>
<span class="w">                </span><span class="o">`</span><span class="p">(</span><span class="nb">lambda</span><span class="w"> </span><span class="p">(</span><span class="nv">msg</span><span class="p">)</span>
<span class="w">                   </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="nv">msg</span>
<span class="w">                     </span><span class="p">(</span><span class="nv">string-match-p</span>
<span class="w">                      </span><span class="o">,</span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="s">&quot;^&quot;</span><span class="w"> </span><span class="nv">dir-name</span><span class="p">)</span>
<span class="w">                      </span><span class="p">(</span><span class="nv">mu4e-message-field</span><span class="w"> </span><span class="nv">msg</span><span class="w"> </span><span class="nb">:maildir</span><span class="p">))))</span>
<span class="w">                </span><span class="nb">:vars</span>
<span class="w">                </span><span class="o">`</span><span class="p">((</span><span class="nv">user-mail-address</span><span class="w">    </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;mrdust1880@outlook.com&quot;</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nf">user-full-name</span><span class="w">       </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;Mr.Dust&quot;</span><span class="p">)</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">mu4e-sent-folder</span><span class="w">     </span><span class="o">.</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="nv">dir-name</span><span class="w"> </span><span class="s">&quot;/Sent&quot;</span><span class="p">))</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">mu4e-drafts-folder</span><span class="w">   </span><span class="o">.</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="nv">dir-name</span><span class="w"> </span><span class="s">&quot;/Drafts&quot;</span><span class="p">))</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">mu4e-trash-folder</span><span class="w">    </span><span class="o">.</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="nv">dir-name</span><span class="w"> </span><span class="s">&quot;/Deleted&quot;</span><span class="p">))</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">mu4e-refile-folder</span><span class="w">   </span><span class="o">.</span><span class="w"> </span><span class="o">,</span><span class="p">(</span><span class="nf">concat</span><span class="w"> </span><span class="nv">dir-name</span><span class="w"> </span><span class="s">&quot;/存档&quot;</span><span class="p">))</span>
<span class="w">                  </span><span class="p">(</span><span class="nv">mu4e-compose-signature</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="s">&quot;Dare to know.&quot;</span><span class="p">))))</span>
<span class="w">             </span><span class="nv">mu4e-change-filenames-when-moving</span><span class="w"> </span><span class="no">t</span>
<span class="w">             </span><span class="nv">mu4e-get-mail-command</span><span class="w"> </span><span class="s">&quot;update-mail&quot;</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-org2a5b502" class="outline-3">
<h3 id="org2a5b502">日志</h3>
<div class="outline-text-3" id="text-org2a5b502">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:11: parse error near `;;'
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgb7d6185" class="outline-3">
<h3 id="orgb7d6185">番茄闹钟</h3>
<div class="outline-text-3" id="text-orgb7d6185">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">alert</span><span class="w"> </span><span class="s">&quot;https://github.com/jwiegley/alert&quot;</span>
<span class="w">             </span><span class="nv">org-pomodoro</span><span class="w"> </span><span class="s">&quot;https://github.com/marcinkoziej/org-pomodoro&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Basic support for Pomodoro technique in Org Mode.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:autoload</span><span class="w"> </span><span class="nv">org-pomodoro</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:option</span><span class="w"> </span><span class="nv">org-pomodoro-start-sound-p</span><span class="w"> </span><span class="no">t</span>
<span class="w">           </span><span class="nv">org-pomodoro-length</span><span class="w"> </span><span class="mi">25</span>
<span class="w">           </span><span class="nv">org-pomodoro-short-break-length</span><span class="w"> </span><span class="mi">5</span>
<span class="w">           </span><span class="nv">org-pomodoro-long-break-length</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:bind-into</span><span class="w"> </span><span class="nv">org-agenda-mode-map</span><span class="w"> </span><span class="s">&quot;G&quot;</span><span class="w"> </span><span class="nv">org-pomodoro</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:with-hook</span><span class="w"> </span><span class="nv">org-pomodoro-long-break-finished-hook</span>
<span class="w">    </span><span class="p">(</span><span class="nb">lambda</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="k">setq</span><span class="w"> </span><span class="nv">org-pomodoro-count</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span>
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgac616f7" class="outline-3">
<h3 id="orgac616f7">笔记管理</h3>
<div class="outline-text-3" id="text-orgac616f7">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:65: unmatched "
 </pre>
</div>
</div>
</div>

<div id="outline-container-orgb588025" class="outline-3">
<h3 id="orgb588025">博客生成</h3>
<div class="outline-text-3" id="text-orgb588025">
<p>
基于 <a href="https://github.com/bastibe/org-static-blog" target="_blank">org-static-blog</a> 写的自用的 publish 系统。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:87: parse error near `)'
 </pre>
</div>
</div>
</div>
<div id="outline-container-org116fb32" class="outline-3">
<h3 id="org116fb32">密码管理</h3>
<div class="outline-text-3" id="text-org116fb32">
</div>
<div id="outline-container-org0c1b8a0" class="outline-4">
<h4 id="org0c1b8a0">EasyPG</h4>
<div class="outline-text-4" id="text-org0c1b8a0">
<p>
配置 EasyPG, 使用 minibuffer 输入密码。默认给的 GUI 打字有时候会打不上，需要按几下才反应。
</p>
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:3: parse error near `)'
 </pre>
</div>

<p>
然后配置 gpg agent. 编辑 <code>~/.gnupg/gpg-agent.conf</code>:
</p>
<div class="org-src-container">
<pre class="nil"> allow-emacs-pinentry
allow-loopback-pinentry
 </pre>
</div>

<p>
最后重启 gpg agent. 好像直接 kill 掉会自动重启。
</p>
</div>
</div>

<div id="outline-container-org06f26be" class="outline-4">
<h4 id="org06f26be">emacs-id-manager</h4>
<div class="outline-text-4" id="text-org06f26be">
<p>
<code>password-generator.el</code> 这个包的名字有点坑的，URL 里面是 gen <b>a</b> rator, 而包名字却是 gen <b>e</b> rator.
</p>

<p>
然后用 <code>emacs-password-genarator</code> 的方法，封装成一个函数供 id-manager 使用。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:10: parse error near `)'
 </pre>
</div>

<p>
id-manager 的文档并不太详细，这里给出它定义的按键映射
</p>
<ul class="org-ul">
<li>q 退出</li>
<li>Q 不保存退出</li>
<li>n/j 下一行</li>
<li>p/k 上一行</li>
<li>a/+ 添加</li>
<li>e/m 修改</li>
<li>d/- 删除</li>
<li>u/r 刷新</li>
<li>T/N/I/M 按时间/名字/ID/备注排序</li>
<li>S 显示密码开关</li>
<li>s 输出当前行密码，如果密码带 <code>%</code> 就会有问题，所以重写它的输出方法。</li>
<li>RET 复制当前行密码</li>
</ul>

<p>
<b>IMPORTANT</b> 我看代码的时候，作者好像把 NAME 和 ID 弄得比较乱。ID-Password 界面的 <b>Name 是唯一的，ID 可以重复。</b>
</p>

<p>
还有个问题， EasyPG 保存文件的时候要输入两次密码，这个比较恶心，每次都是相当于重新设置一遍加密。
</p>
</div>
</div>
</div>

<div id="outline-container-org949e003" class="outline-3">
<h3 id="org949e003">终端 ESH</h3>
<div class="outline-text-3" id="text-org949e003">
<p>
Eshell 是用 Elisp 实现的 Shell, 并非终端模拟器。在 Emacs 中终端模拟器并没有把我最希望集成的功能<b>快捷键</b>集成进来，它还是会依赖模拟的 shell 的快捷键。而 esh 则完全兼容 Emacs, 可以直接在当前 Emacs 打开文件。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:9: parse error near `)'
 </pre>
</div>
</div>

<div id="outline-container-orgbffd6cd" class="outline-4">
<h4 id="orgbffd6cd">Prompt</h4>
<div class="outline-text-4" id="text-orgbffd6cd">
<p>
Prompt 就是命令输入前的那串提示字符。换个主题，改个样式。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:14: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org67e8d15" class="outline-4">
<h4 id="org67e8d15">补全</h4>
<div class="outline-text-4" id="text-org67e8d15">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">pcmpl-args</span><span class="w"> </span><span class="s">&quot;https://github.com/JonWaltman/pcmpl-args.el&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:after</span><span class="w"> </span><span class="nv">eshell</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">pcmpl-args</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:also-load</span><span class="w"> </span><span class="nv">corfu</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:local-set</span><span class="w"> </span><span class="nv">corfu-auto</span><span class="w"> </span><span class="no">t</span>
<span class="w">                </span><span class="nv">corfu-auto-delay</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:hook</span><span class="w"> </span><span class="nv">corfu-mode</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>
 </pre>
</div>
</div>
</div>
<div id="outline-container-orge5ab7c5" class="outline-4">
<h4 id="orge5ab7c5">帮助增强</h4>
<div class="outline-text-4" id="text-orge5ab7c5">
<div class="org-src-container">
<pre class="emacs-lisp"> <span class="p">(</span><span class="nv">setup</span><span class="w"> </span><span class="p">(</span><span class="nb">:spi</span><span class="w"> </span><span class="nv">esh-help</span><span class="w"> </span><span class="s">&quot;https://github.com/tom-tan/esh-help&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:doc</span><span class="w"> </span><span class="s">&quot;Help functions and support for Eshell:&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">:after</span><span class="w"> </span><span class="nv">eshell</span>
<span class="w">    </span><span class="p">(</span><span class="nb">:require</span><span class="w"> </span><span class="nv">esh-help</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nv">setup-esh-help-eldoc</span><span class="p">)))</span>
 </pre>
</div>
</div>
</div>
<div id="outline-container-orgffa09b2" class="outline-4">
<h4 id="orgffa09b2">自定义函数</h4>
<div class="outline-text-4" id="text-orgffa09b2">
<div class="org-src-container">
<pre class="emacs-lisp">  </pre>
</div>
</div>
</div>
<div id="outline-container-orgef862ca" class="outline-4">
<h4 id="orgef862ca">别名</h4>
<div class="outline-text-4" id="text-orgef862ca">
<div class="org-src-container">
<pre class="bash"> <span class="nb">alias</span><span class="w"> </span>ll<span class="w"> </span>ls<span class="w"> </span>-lh<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>cheatsheet<span class="w"> </span>cat<span class="w"> </span>~/.cheatsheet.org
<span class="nb">alias</span><span class="w"> </span>f<span class="w"> </span>find-file<span class="w"> </span><span class="nv">$1</span>
<span class="nb">alias</span><span class="w"> </span>mv<span class="w"> </span>mv<span class="w"> </span>-v<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>cp<span class="w"> </span>cp<span class="w"> </span>-v<span class="w"> </span><span class="nv">$*</span>

<span class="nb">alias</span><span class="w"> </span>yaconf<span class="w"> </span>yay<span class="w"> </span>-Pg<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yaclean<span class="w"> </span>yay<span class="w"> </span>-Sc<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yaclr<span class="w"> </span>yay<span class="w"> </span>-Scc<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yaupg<span class="w"> </span>yay<span class="w"> </span>-Syu<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yasu<span class="w"> </span>yay<span class="w"> </span>-Syu<span class="w"> </span>--noconfirm<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yain<span class="w"> </span>yay<span class="w"> </span>-S<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yains<span class="w"> </span>yay<span class="w"> </span>-U<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yare<span class="w"> </span>yay<span class="w"> </span>-R<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yarem<span class="w"> </span>yay<span class="w"> </span>-Rns<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yarep<span class="w"> </span>yay<span class="w"> </span>-Si<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yareps<span class="w"> </span>yay<span class="w"> </span>-Ss<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yaloc<span class="w"> </span>yay<span class="w"> </span>-Qi<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yalocs<span class="w"> </span>yay<span class="w"> </span>-Qs<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yalst<span class="w"> </span>yay<span class="w"> </span>-Qe<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yaorph<span class="w"> </span>yay<span class="w"> </span>-Qtd<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yainsd<span class="w"> </span>yay<span class="w"> </span>-S<span class="w"> </span>--asdeps<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yamir<span class="w"> </span>yay<span class="w"> </span>-Syy<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>yaupd<span class="w"> </span><span class="s2">&quot;yay -Sy&quot;</span><span class="w"> </span><span class="nv">$*</span>

<span class="nb">alias</span><span class="w"> </span>ga<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>gaa<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>--all
<span class="nb">alias</span><span class="w"> </span>gc<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>--verbose<span class="w"> </span>-m<span class="w"> </span><span class="nv">$1</span>
<span class="nb">alias</span><span class="w"> </span>gca<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>--verbose<span class="w"> </span>--all<span class="w"> </span>-m<span class="w"> </span><span class="nv">$1</span>
<span class="nb">alias</span><span class="w"> </span>gp<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>gl<span class="w"> </span>git<span class="w"> </span>pull
<span class="nb">alias</span><span class="w"> </span>gst<span class="w"> </span>git<span class="w"> </span>status

<span class="nb">alias</span><span class="w"> </span>sc-status<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>sc-start<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>sc-stop<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>sc-restart<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>sc-enable<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>sc-enable-now<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>sc-disable<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>disable<span class="w"> </span><span class="nv">$*</span>
<span class="nb">alias</span><span class="w"> </span>sc-disable-now<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>disable<span class="w"> </span>--now<span class="w"> </span><span class="nv">$*</span>
 </pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org12b350b" class="outline-3">
<h3 id="org12b350b">书籍管理</h3>
<div class="outline-text-3" id="text-org12b350b">
<p>
用 org mode 的 Attachment 来做书籍管理。 <code>:PROPERTIES:</code> 里填上各种信息，然后对应的文件名字归一化。加一个 advice, 使得文档打开使用当前窗口，而不是默认的 find-file-other-window.
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:5: parse error near `)'
 </pre>
</div>
</div>
</div>

<div id="outline-container-org62e2ff0" class="outline-3">
<h3 id="org62e2ff0">文档阅读</h3>
<div class="outline-text-3" id="text-org62e2ff0">
</div>
<div id="outline-container-org5c68b7d" class="outline-4">
<h4 id="org5c68b7d">EPUB</h4>
<div class="outline-text-4" id="text-org5c68b7d">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:5: unmatched "
 </pre>
</div>
</div>
</div>

<div id="outline-container-org501809d" class="outline-4">
<h4 id="org501809d">PDF</h4>
<div class="outline-text-4" id="text-org501809d">
<p>
要执行一遍 <code>/pdf-tools/server/autobuild</code>, 它自动安装 epdfinfo 到指定位置。
</p>

<div class="org-src-container">
<pre class="emacs-lisp"> zsh:11: parse error near `)'
 </pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgea71f68" class="outline-2">
<h2 id="orgea71f68">配置结束</h2>
<div class="outline-text-2" id="text-orgea71f68">
<div class="org-src-container">
<pre class="emacs-lisp"> zsh:5: parse error near `)'
 </pre>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="text-footnotes" role="doc-endnotes">
<ol>
<li id="fn:1">
<p class="footpara">
<a href="https://emacs.nasy.moe" target="_blank">Nasy Emacs 配置</a>
<a href="#fnr:1.1" class="footnote-backref" role="doc-backlink">↩︎</a>
<a href="#fnr:1.2" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
<li id="fn:2">
<p class="footpara">
<a href="https://github.com/alexluigit/emacs-grandview" target="_blank">GitHub - alexluigit/emacs-grandview: 原非大观。</a>
<a href="#fnr:2.1" class="footnote-backref" role="doc-backlink">↩︎</a>
<a href="#fnr:2.2" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
<li id="fn:3">
<p class="footpara">
<a href="https://emacs-china.org/t/lsp-bridge/20786/1208?u=fingerknight" target="_blank">lsp-bridge &#x2013; 速度最快的语法补全插件 - #1208，来自 blove - Emacs-general - Emacs China</a>
<a href="#fnr:3.1" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
<li id="fn:4">
<p class="footpara">
<a href="https://www.emacswiki.org/emacs/SetupEl" target="_blank">EmacsWiki: Setup El</a>
<a href="#fnr:4.1" class="footnote-backref" role="doc-backlink">↩︎</a>
<a href="#fnr:4.2" class="footnote-backref" role="doc-backlink">↩︎</a>
<a href="#fnr:4.3" class="footnote-backref" role="doc-backlink">↩︎</a>
</p>
</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
</div>
</div>
</div>
<div id="footer">
<center> The End </center></div>
</body>
</html>
